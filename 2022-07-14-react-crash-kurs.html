<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>React Training</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"
    />
    <link rel="stylesheet" href="slides/revealjs/reveal.js/dist/reset.css" />
    <link rel="stylesheet" href="slides/revealjs/reveal.js/dist/reveal.css" />
    <link rel="stylesheet" href="slides/revealjs/reveal.js/dist/theme/solarized.css" />

    <!-- Theme used for syntax hislides/ghlighted code -->
    <link rel="stylesheet" href="slides/revealjs/highlight-js-github-theme.css" />
    <link rel="stylesheet" href="slides/revealjs/styles.css" />
  </head>

  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section data-state="title">
          <h2 class="title" style="font-size: 7rem">
            <b>"Crash Kurs React &amp; TypeScript"</b>
          </h2>

          <h3>
            <span class="transparent-bg">14./15. Juli 2022</span>
          </h3>

          <h4>
            <span class="transparent-bg">
              <a href="https://nilshartmann.net" target="_blank">Nils Hartmann</a>
              |
              <a href="https://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
            </span>
          </h4>

          <p style="margin-top: 4rem"></p>
          <div>
            <h3><span class="transparent-bg">Slides</span></h3>
            <p>
              <span class="transparent-bg">Lokal: 2022-07-14-react-crash-kurs.html</span>
            </p>
            <p>
              <span class="transparent-bg"
                >Remote:
                <a
                  href="https://nilshartman.github.io/react18-training/2022-07-14-react-crash-kurs.html"
                  >https://react.schule/crash-kurs</a
                ></span
              >
            </p>
          </div>
        </section>
        <section>
          <h2>Nils Hartmann</h2>
          <p style="margin-top: 2rem">
            <a href="https://nilshartmann.net" target="_blank">https://nilshartmann.net</a>
            /
            <a href="https://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
          </p>
          <p style="margin-top: 2rem">
            <em>Freiberuflicher Software-Entwickler, Berater und Trainer aus Hamburg</em>
          </p>
          <p></p>
          <p style="margin-top: 5rem">Java | JavaScript, TypeScript | React | GraphQL</p>
          <div style="display: flex; justify-content: center; margin-top: 2rem">
            <div style="margin-left: 15px">
              <a href="https://graphql.schule/video-kurs"
                ><img
                  style="max-height: 450px"
                  src="slides/images/screenshot-graphql-kurs.png"
                /><br />https://graphql.schule/video-kurs</a
              >
              <br />
            </div>
            <!--  -->
            <div style="margin-left: 100px">
              <a href="https://reactbuch.de"
                ><img
                  style="max-height: 450px"
                  src="slides/images/react-buch-v2.jpg"
                /><br />https://reactbuch.de</a
              >
              <br />
            </div>
          </div>
        </section>

        <!-- ============================================================================= -->

        <section>
          <h2>Und ihr?</h2>
          <ul>
            <li>Stellt euch doch bitte kurz vor...</li>
            <li>W√ºnsche f√ºr diese Schulung? Besondere Themen oder Interessen?</li>
          </ul>
        </section>

        <!-- ============================================================================= -->

        <section data-markdown>
          <textarea data-template>
### Zeitplan

* Do/Fr: Jeweils 9:00 bis 17:00 Uhr
  * Mittagspause: 12:30 bis 13:30 Uhr
  * K√ºrzere Pausen zwischendurch ‚òïÔ∏è üò¥
* Einverstanden? 
          </textarea>
        </section>

        <section>
          <h2>Agenda</h2>
          <h3>React Einf√ºhrung</h3>
          <ul style="font-size: 85%">
            <li>
              <a href="#/t1">Teil I: React Einf√ºhrung</a>
            </li>
            <li>
              <a href="#/t2">Teil II: React-Komponenten (Details)</a>
            </li>
            <li>
              <a href="#/t3">Teil III: Komponentenhierarchien</a>
            </li>
            <li style="margin-top: 20px">
              <a href="#/t-server">Teil IV: Daten lesen und schreiben vom Server (REST APIs)</a>
            </li>

            <li style="margin-top: 20px">
              <a href="#/t-typescript">Teil V: TypeScript</a>
            </li>

            <li style="margin-top: 20px">
              <a href="#/t-router">Teil VI: Router</a>
            </li>

            <li style="margin-top: 20px">
              <a href="#/t-context">Teil VII: Context</a>
            </li>

            <li style="margin-top: 20px">
              <a href="#/t-protected-routes">Teil VIII: Beispiel: Gesch√ºtzte Routen mit Context</a>
            </li>

            <li style="margin-top: 20px">
              Ausblick: <a href="#/t-libs">Typische Bibliotheken</a>, Eure Fragen etc.
            </li>
          </ul>
        </section>

        <section>
          <h2>Grunds√§tzliches</h2>
          <p><b>Jederzeit:</b> Fragen und Diskussionen!</p>
          <p>Motto: Es gibt keine dummen Fragen!</p>
          <p>Bemerkbar machen per Audio, Chat oder Team Reaktion "Hand erheben"</p>
          <span><img width="30%" src="slides/images/teams-hand-heben.png" /></span>
          <p>Oder auf Miro-Board schreiben (Link im Chat)</p>

          <p>Bonuspunkte f√ºr eingeschaltetes Video ü•∞</p>
          <p>Wir machen zwischendurch √úbungen, in denen ihr selbst programmieren k√∂nnt</p>
        </section>

        <section id="t1">
          <h1>Teil 1</h1>
          <h2>React Einf√ºhrung</h2>
        </section>

        <section>
          <h3>Beispiel-Anwendung</h3>
          <a target="_blank" href="http://localhost:3000">
            <img src="slides/images/blog-example.png" style="height: 650px" />
          </a>
        </section>

        <section data-markdown>
          <textarea data-template>
## Hintergrund: Single-Page-Anwendungen

---

### "Klassische" serverseitig-gerenderte Anwendungen

<img style="height: 800px" src="slides/images/abb-02a-classic-webapp-architecture.png" />

---

### Single-Page-Anwendungen

* <img style="height: 800px" src="slides/images/abb-02c-spa-webapp-architecture.png" />

* "Single-Page" bezieht sich auf _eine_ `index.html`-Datei
  * Seitenwechsel / Aktualisierung der UI findet nur im Client statt
* Kommuniktation mit Server "nur" noch f√ºr Daten (z.B. REST API)

---

## React


          </textarea>
        </section>

        <section>
          <h3>Komponenten in React</h3>
          <p>
            <em>Zentrales Konzept in React: <b>Komponenten</b></em>
          </p>
          <img style="height: 800px" src="slides/images/soc.png" />
        </section>

        <section>
          <h3>Komponenten in React</h3>
          <p style="font-size: smaller">Unser Beispiel in Komponenten</p>
          <img src="slides/images/blog-example.png" style="height: 650px" />
        </section>

        <section>
          <h3>React Komponenten</h3>
          <ul>
            <li>bestehen aus <b>Logik und UI</b> (keine separaten Templates)</li>
            <li>werden <b>deklarativ</b> beschrieben</li>
            <li>werden immer <b>komplett gerendert</b> (kein 2-Wege-Data-Binding)</li>
            <li>werden zu <b>ganzen Anwendungen</b> aggregiert</li>
            <li>werden als <b>JavaScript Funktionen</b> implementiert ("Hooks API")</li>
            <li>
              Dokumentation
              <ul class="xx-list">
                <li>
                  Aktuelle Doku (Klassen API-basiert):
                  <a href="https://reactjs.org/">https://reactjs.org/</a>
                </li>
                <li>
                  Neue Doku (noch Beta):
                  <a href="https://beta.reactjs.org/">https://beta.reactjs.org/</a>
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <section data-markdown>
          <textarea data-template>
## React Toolstack

* F√ºr die Entwicklung von Single-Page-Anwendungen werden eine Reihe von Tools ben√∂tigt
* Compiler
  * jsx -> js, TypeScript -> JavaScript, "modernes JS" -> ES5
* Bundler
  * Machen aus Euren JS/TS-Dateien JS-Dateien f√ºr den Browser
  * ohne Modulsystem
* Linter: Statische Code-Analyse (optional)
* Test-Framework (optional)  
* CSS Pr√§prozessoren (optional)

---

## create-react-app

* Erzeugt ein fertiges Projekt mit allen typischerweise genutzten Tools
* `npx create-react-app PROJEKTNAME --template typescript`
* Doku: [https://create-react-app.dev/](https://create-react-app.dev/)

          </textarea>
        </section>

        <section>
          <h3>Tooling: Linter</h3>
          <p><em>Statische Codeanalyse</em></p>
          <ul>
            <li>Findet typische JavaScript Programmierfehler</li>
            <li>Achtet auf Einhaltung von Konventionen (z.B. Semikolon ja/nein)</li>
            <li>Kann in den CI-Build und IDE eingebunden werden</li>
            <li>
              <div>
                <p><a href="https://eslint.org/">ESLint</a></p>

                <img style="height: 400px" src="slides/images/eslint.png" />
              </div>
            </li>
          </ul>
        </section>

        <!-- ============================================================================= -->

        <section>
          <h2>Unsere erste React-Komponente</h2>
          <h3>Sehen wir uns die wichtigsten Konzepte einer React-Komponente im Code an</h3>

          <ul>
            <li>Schritt-f√ºr-Schritt (<code>blog-example/workspace</code>)</li>
          </ul>
        </section>

        <section id="interaktiv-hellomessage">
          <h3>Hello World React</h3>
          <code>PostEditor.js</code>
          <pre><code>
  import React from "react";
  
  export default function PostEditor() {
    const [title, setTitle] = React.useState("");
  
    return (
      &lt;div>
        &lt;label>
          Title
          &lt;input onChange={event => setTitle(event.target.value)} value={title} />
        &lt;/label>
      &lt;/div>
    );
  }
            </code></pre>
        </section>

        <section>
          <h3>Einbinden der Anwendung in die HTML-Seite</h3>
          <div>
            <p>
              <code>index.html</code>
            </p>
            <pre><code>
  &lt;html>
    &lt;-- ... -->
    &lt;body>
      <div id="root"></div>
    &lt;/body>
  &lt;/html>
  </code></pre>
          </div>
          <div>
            <p>
              <code>index.js</code>
            </p>
            <p>Achtung! Leicht ge√§nderte API ab React 18:</p>
            <pre><code class="javascript">
  // React 18
  import React from 'react';

  import { createRoot } from 'react-dom/client';
  import PostEditor from './PostEditor';
  
  const root = createRoot(document.getElementById('root'));
  root.render(&lt;PostEditor />);
  </code></pre>
            <p>Zum Vergleich vor React 18:</p>
            <pre><code class="javascript">
    // Zum Vergleich: React 17
    import React from 'react';
    import ReactDOM from 'react-dom';
  
    import PostEditor from './PostEditor';
    
    ReactDOM.render(&lt;PostEditor />, 
      document.getElementById('root')
    );
    </code></pre>
          </div>
        </section>

        <!-- ============================================================================= -->
        <section id="t-module" data-state="exkurs">
          <h3>Hintergrund: JavaScript Module</h3>
          <p>
            Mit <code>import</code> order <code>export</code> wird aus einer "normalen"
            JavaScript-Datei ein JavaScript <b>Modul</b>
          </p>
          <p>Mit Modulen sind Dateiinhalte nicht mehr global sichtbar</p>
          <p>Module bestimmen explizit, was au√üerhalb verwendet werden darf</p>
          <p>Module geben explizit an, was sie aus anderen Modulen verwenden wollen</p>
        </section>

        <!-- ============================================================================= -->
        <section data-state="exkurs">
          <h3>Module</h3>
          <h4>Default Exporte</h4>
          <p>
            <em
              >Objekte, Funktionen, Klassen etc m√ºssen explizit <b>exportiert</b> und
              <b>importiert</b> werden</em
            >
          </p>
          <p class="fragment">Eine <code>export</code>-Anweisung macht aus einer Datei ein Modul</p>

          <pre class="fragment"><code class="javascript">
            // src/domain/Person.js
            export default function createPerson { ... }

            oder

            function createPerson { ... }
            export default createPerson
          </code></pre>

          <pre class="fragment"><code class="javascript">
              // src/domain/Person.js
              export default function createPerson() { ... }

              oder

              function createPerson() { ... }
              export default createPerson;
            </code></pre>

          <pre class="fragment"><code class="javascript">
                Nur EIN Default Export erlaubt;
                export default function createPerson() { ... }
                export default function makePerson { ... } // KONFLIKT
              </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section data-state="exkurs">
          <h3>Module</h3>
          <h4>Importieren</h4>
          <p class="fragment">Beim importieren geben wir Pfade(!) an</p>

          <pre class="fragment"><code class="javascript">
              // src/domain/Person.js
              export default function createPerson() { ... }

            </code></pre>

          <pre class="fragment"><code class="javascript">
                // src/App.js
                import createPerson from "./domain/Person.js";

                const person = createPerson("Lemmy", "Kilmister");
              </code></pre>

          <p class="fragment">üëâ In der React-Entwicklung k√∂nnt ihr die Dateiendung weglassen!</p>
        </section>

        <!-- ============================================================================= -->
        <section data-state="exkurs">
          <h3>Module</h3>
          <h4>Benannte Exporte</h4>
          <p class="fragment">
            Ein Modul kann neben einem Default auch beliebig viele
            <b>benannte Exporte</b> haben
          </p>

          <pre class="fragment"><code class="javascript">
                // src/domain/Person.js
                export default function createPerson { ...}

                export function updatePerson() { ... }
                export function removePerson() { ... }
              </code></pre>

          <pre class="fragment"><code class="javascript">
                  // src/domain/Person.js
                  function createPerson { ...}
                  function updatePerson() { ... }
                  function removePerson() { ... }

                  export default createPerson;

                  export { updatePerson, removePerson }
                </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section data-state="exkurs">
          <h3>Module</h3>
          <h4>Benannte Importe</h4>
          <pre class="fragment"><code class="javascript">
                    // src/App.js
                    import { removePerson } from "./Person"
              </code></pre>
          <pre class="fragment"><code class="javascript">
                // Default und benannten Export importieren
                import createPerson, { removePerson } from "./Person.js"
              </code></pre>

          <pre class="fragment"><code class="javascript">
                // Benannten Export beim Import umbennenen
                import createPerson, { removePerson as deletePerson } from "./Person.js"

                deletePerson(/* ... */);
              </code></pre>
        </section>

        <section>
          <h3>Der Trainingsworkspace</h3>
          <ul class="x-list">
            <li style="margin-bottom: 40px">
              <code>2022-07-14-react-crash-kurs.html</code>: Die Slides (√∂ffnen im Browser mit
              Doppelklick)
            </li>
            <li style="margin-bottom: 40px">
              Der Code ist im <code><b>blog-example</b></code> Verzeichnis
            </li>

            <li style="margin-bottom: 40px">
              <code>blog-example/<b>workspace</b></code
              >: Verzeichnis f√ºr Eure √úbungen <br />üëâ&nbsp;<b>Empfehlung</b>: nur diesen Ordner in
              IDE/Editor √∂ffnen
            </li>
            <li>
              <code>blog-example/<b>steps</b></code
              >: Fertiger Source-Code nach jeder √úbung
            </li>
          </ul>
        </section>
        <section>
          <h2>√úbung #1: Hello-World</h2>
          <h3>
            <em>Eine erste React-Komponente</em>
          </h3>
        </section>
        <section>
          <h3>Schritt #1: Tool Chain starten</h3>
          <p>Gemeinsam, Schritt-f√ºr-Schritt:</p>
          <ol class="x-list" style="font-size: 85%">
            <li>
              <code>cd blog-example/workspace</code>
            </li>

            <li>
              <code>npm start</code>
            </li>

            <li>
              Der Browser sollte automatisch
              <a href="http://localhost:3000" target="_blank">http://localhost:3000</a>
              √∂ffnen
            </li>

            <li>Wenn Du "Hello, World" im Browser siehst, ist alles gut!</li>
            <li>Dann bitte in Teams "Hand heben" üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>
        <section>
          <h3>Schritt #2: Deine erste React-Komponente</h3>
          <p>
            <em
              >Ein kleiner Schritt f√ºr die PostEditor-Komponente, ein gro√üer Schritt f√ºr dich auf
              deinem Weg, React zu lernen!</em
            >
          </p>
          <ul>
            <li>Ersetze den "statischen" Code in <code>PostEditor.js</code></li>
            <li>Die Komponente soll <b>PostEditor</b> hei√üen</li>
            <li>
              Sie sollte einen Zustand/State (<code>title</code>) und ein Eingabefeld daf√ºr haben
            </li>
            <li>
              Als Hilfe kannst Du den Code aus den
              <a href="#interaktiv-hellomessage">vorherigen Slides</a> ansehen.
            </li>
            <li>
              Eine m√∂gliche L√∂sung findest Du auch in <code>blog-example/steps/1-hello-world</code>
            </li>

            <li>
              <em>Optional: mache ein paar Experimente mit der Komponente, zum Beispiel:</em>
              <ul class="no-fragment">
                <li>
                  Kannst Du unter dem Eingabefeld den gerade eingegebenen Text ausgeben lassen, so
                  dass dieser immer dem aktuellen Inhalt des Eingabefeldes entspricht?
                </li>
              </ul>
            </li>
            <li>Wenn Du fertig bist, bitte "Hand heben" in Teams üôã‚Äç‚ôÄÔ∏è</li>
          </ul>
        </section>

        <section id="t2">
          <h1>Teil II</h1>
          <h2>React Komponenten</h2>
        </section>

        <section>
          <h3>React: JSX</h3>
          <ul>
            <li style="font-size: 80%">
              Wird wie HTML hingeschrieben, inkl Attribute:
              <pre><code class="xml"  >
&lt;div>&lt;input type="text"/>&lt;/div>
                    </code></pre>
            </li>
            <li style="font-size: 80%">
              Achtung! <code>class</code>-Attribut hei√üt <code>className</code>:
              <pre><code class="xml"  >
                        &lt;h1 className="title">...&lt;/h1>
                    </code></pre>
            </li>
            <li style="font-size: 80%">
              Attribute, die keine Strings sind, m√ºssen in {} eingeschlossen werden:
              <pre><code class="xml"  >
&lt;Counter label="Count" count={7} showValues={true} />
                    </code></pre>
            </li>

            <li style="font-size: 80%">
              CSS-Eigenschaften werden als Objekt √ºbergeben in Camel-Case-Notation:
              <pre><code class="xml"  >
const styles = { marginLeft: '10px', border: '1px solid red' };
&lt;h1 style={styles}>...&lt;/h1>
                    </code></pre>
            </li>
          </ul>
        </section>

        <section>
          <h3>Zustand einer Komponente und der useState-Hook (Zusammenfassung)</h3>
          <ul class="fragement">
            <li>Beispiel: Inhalt eines Eingabefelds, Daten vom Server, Menu offen oder zu</li>
            <li><b>Werte</b> √ºblicherweise immutable</li>
            <li>Arbeiten mit Zustand √ºber <b>useState</b>-Hook</li>
            <li>
              useState liefert Array mit zwei Werten zur√ºck: aktuellen Zustand, und setter-Funktion
              um Zustand zu ver√§ndern
            </li>
          </ul>
          <pre><code class="javascript"  >
function HelloWorld() {
  const [title, setTitle] = React.useState("");

  return &lt;input onChange={e => setTitle(e.target.value) value={title} />;
}
                  </code></pre>
          <ul>
            <li>
              Aufruf des Setters <b>l√∂st erneutes rendern der <i>gesamten</i> Komponente aus</b>
            </li>
            <li>
              Es k√∂nnen mehrere States erzeugt werden, durch Verwendung mehrerer useState-Aufrufe
            </li>
            <li><b>Zustand</b> ist eines der <b>zentralen</b> Konzepte von React</li>
          </ul>
        </section>

        <section data-markdown>
          <textarea data-template>
## React Hooks API

* Es gibt einige "spezielle" Funktionen in der React API, die "Hooks" genannt werden
* Diese Funktionen werden in einer Komponente verwendet, um mit deren State und Lebenszyklus zu interagieren
* Namen von Hook-Funktionen fangen mit `use` an.
  * _Alle_ Funktionen, die mit `use` anfangen, werden von React als Hook Funktionen interpretiert
    * (auch eigene Funktionen)
* Beispiele: `useState`, `useContext`, `useEffect`

---

## React Hooks API

* Hook Funktionen sind "normale" JavaScript-Funktionen
* Es gibt aber ein paar Regeln bei der Verwendung zu beachten
 * [Rules of Hooks](https://reactjs.org/docs/hooks-rules.html)
  * Insbesondere d√ºrfen sie nur in Komponenten- und Hook-Funktionen verwendet werden
  * Sie d√ºrfen nicht in Bedigungen (`if`/`switch`, ...) und Schleifen (`for`/`while`) verwendet werden
         </textarea
          >>
        </section>

        <section>
          <h2>√úbung: Post-Editor f√ºr unsere Anwendung</h2>
          <em><b>Erweitere deine Komponente um neue Features</b></em>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol class="xx-list">
            <li>
              Zus√§tzlich zum "title", sollte es einen weiteren Zustand und eine Textarea geben:
              <code>body</code>. Ein <code>textarea</code>-Element hat dieselbe API wie ein
              <code>input</code>-Feld, du kannst also auch hier mit <code>onChange</code> und
              <code>value</code> arbeiten.
            </li>
            <!-- <li>
              F√ºge unter beiden Feldern eine Fehler-Meldung hinzu, wenn das jeweilige Feld leer ist
              (z.B. "Please fill in Xyz")
            </li> -->
            <li>
              F√ºge einen "Clear"-Button hinzu, der beide Eingabefeld leert. Das Property auf dem
              Button ist <code>onClick</code>.
            </li>
            <li>
              <b><em>Optional:</em></b
              >Der Clear-Button soll disabled sein, wenn beide Eingabefelder leer sind. Ein
              <code>button</code>-Element hat ein Attribute <code>disabled</code>, das Du dazu auf
              <code>true</code> bzw. <code>false</code> setzen musst.
            </li>
            <li>M√∂gliche L√∂sung: <code>steps/2-editor</code></li>
            <li>Wenn Du fertig bist, bitte "Hand heben" in Zoom üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <section id="t3">
          <h1>Teil III</h1>
          <h2>React: Komponentenhierarchien</h2>

          <h3>Kommunikation zwischen Komponenten mit Properties</h3>
        </section>

        <!-- - - - - - - - - - - - - - - - PROPS HIER ERST - - - - - - - - - - - - - - -  -->
        <section>
          <h3>React: Properties</h3>
          <p>Live: Properties f√ºr initialen Werte des Post-Editors</p>
          <ul>
            <li>
              Mit <b>Properties</b> k√∂nnen einer Komponente von <b>au√üen</b> Werte und Eigenschaften
              √ºbergeben werden

              <pre><code class="javascript"  >
            function PostEditor() {
                // type, onChange und value sind Properties!

                return (
                  &lt;input type="text" onChange={() => setTitle("...")} value={title}&lt;/h1>
                );
              }
            }
            </code></pre>
            </li>
            <li><b>Properties</b> k√∂nnen innerhalb der Komponente nicht ver√§ndert werden</li>
            <li>
              Zum Vergleich: <b>Zustand (State)</b> ist eine <b>innere</b> Eigenschaft der
              Komponente (die ver√§ndert werden kann)
            </li>
          </ul>
        </section>

        <section>
          <h3>Properties ("Props") einer Komponente</h3>
          <ul>
            <li>Komponenten k√∂nnen beliebig eigene Properties definieren</li>
            <li>
              Bei der Angabe der Properties bei der Verwendung einer Komponente werden die
              Properties wie von HTML gewohnt in der Notiation
              <code>name=value</code> hingeschrieben
            </li>
            <li>
              <pre><code class="javascript"  >
              &lt;PostEditor initialTitle="Hello" initialBody="World" />
               </code></pre>
            </li>
            <li>
              ...alle angegebenen Properties werden "gesammelt" und in <b>einem</b> Objekt im 1.
              Methoden-Parameter an Komponente √ºbergeben
            </li>
            <li>
              <pre><code class="javascript"  >
              function PostEditor(props) {
                  // props: { initialTitle: "Hello", initialBody: "World" }
                  const [title, setTitle] = React.useState(props.title);
                  const [body, setBody] = React.useState(props.body);
  
                  return ...;
                }
              }
              </code></pre>
            </li>
            <li>
              <pre><code class="javascript"  >
                // Mit Destructuring
                function PostEditor({initialTitle, initialBody}) {
                   const [title, setTitle] = React.useState(title);
                   const [body, setBody] = React.useState(body);
                
                   return ...;
                  }
                }
                                </code></pre>
            </li>
          </ul>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Properties: Default-Werte</h3>
          <p>Properties sind grunds√§tzlich <b>optional</b>.</p>

          <p>
            Mit dem Object Destructuring-Operator k√∂nnen <b>Default-Werte</b> angegeben werden, f√ºr
            Eigenschaften, die aus einem Objekt gelesen werden, aber dort nicht angegeben (bzw.
            undefined) sind:
          </p>

          <pre><code class="javascript">
            function PostEditor({initialTitle = "New Blog Post", initialBody}) { 
              const [title, setTitle] = React.useState(initialTitle);
            }

            // title wird auf "New Blog Post" gesetzt
            &lt;PostEditor initialBody="Lorem Ipsum" />
          </code></pre>
        </section>

        <!-- ============================================================================= -->

        <section>
          <h3>Virtual DOM</h3>
          <p>"Rendern" hat leider doppelte Bedeutung!</p>
          <img src="slides/images/vdom.png" style="height: 650px" />
        </section>
        <section>
          <h3>Virtual DOM</h3>
          <p>Beispiel: <code>blog-example/steps/2b-rendering</code></p>
        </section>
        <section>
          <h2>√úbung: Properties f√ºr Komponenten</h2>
          <em>Eine Komponente f√ºr Meldungen</em>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol class="xx-list">
            <li>
              Schreibe eine neue Komponente (der einfachheithalber direkt in PostEditor.js), die
              eine Meldung darstellt: <b>Message</b>
            </li>
            <li>
              Die <b>Message</b>-Komponente soll zwei Properties aufnehmen:
              <ul>
                <li><code>msg</code>: ein String mit einer Nachricht</li>
                <li>
                  <code>type</code>: kann entweder der String <code>"error"</code> oder der String
                  <code>"info"</code> sein
                </li>
              </ul>
            </li>
            <li>
              Beispielhafte Verwendung:

              <pre><code class="javascript">
                &lt;Message type="info" msg="Alles prima!" />
                &lt;Message type="error" msg="Leider fehlerhaft" /> 
              </code></pre>
            </li>
            <li>
              Die Komponente soll die √ºbergebene Nachricht aus <code>msg</code> anzeigen: Wenn type
              auf <code>error</code> gestellt ist (oder kein type gesetzt ist), soll die
              <code>msg</code> als Fehler ausgegeben werden (z.B. kann die Komponente das Wort
              "Fehler" vor die Msg schreiben)
            </li>
            <li>
              Verwende die Komponente im PostEditor: um eine Fehler-Meldung unter dem Formular
              auszugeben (z.B. "Bitte f√ºllen Sie das Formular aus") wenn <code>title</code> oder
              <code>body</code> leer sind bzw. eine Info-Meldung, wenn die beiden Felder gef√ºllt
              sind ("Sie haben alle erforderlichen Eingaben get√§tigt!")
            </li>

            <li>M√∂gliche L√∂sung: <code>steps/2a-editor-mit-props</code></li>
            <li>Wenn Du fertig bist, bitte "Hand heben" in Teams üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <section>
          <h2>Komponenten-Hierarchien</h2>
        </section>

        <section>
          <h3>Zwei Ansichten: eine Liste f√ºr Blog-Posts und ein Editor...</h3>
          <p>Exemplarisch zum Beispiel f√ºr Master-Detail-Ansicht</p>
          <code>blog-example/steps/3-hierarchy</code>
        </section>

        <section>
          <h3>Wie kommuniziert unsere Anwendung?</h3>
          <p>Wir haben nun <b>zwei</b> Views: Blog-List und Post-Editor</p>
          <p>Welche ist sichtbar?</p>
          <p>Wie flie√üen die Daten zwischen den beiden Komponenten?</p>
        </section>

        <section>
          <h3>üëâ Wir bauen eine <b>Anwendung</b>: mit Blog-List und Post-Editor</h3>
        </section>

        <section>
          <h3>Datenfluss in React-Anwendungen</h3>
          <ol>
            <li>
              In React Anwendungen werden Komponenten in Hierarchien zu Anwendungen aggregiert. Eine
              "Anwendung" ist nichts weiter als eine Sammlung von Komponenten
            </li>
            <li>
              Innerhalb der Hierarchie wird immer nur <b>in eine Richtung</b> kommuniziert:
              <b>Eltern</b>-Komponenten geben <b>properties</b> an ihre <b>Kinder</b>
            </li>
            <li>
              Mit den Properties k√∂nnen Daten (Blog Post, angemeldeter Benutzer, ...) von "oben"
              nach "unten" gereicht werden. Das kann √ºber mehr als eine Hierarchie-Ebene passieren.
              <p>
                (Eine Komponente kann die Properties oder einen Teil davon ihrerseits weiter nach
                "unten" reichen)
              </p>
            </li>
            <li>
              Mit Properties k√∂nnen au√üerdem <b>callback-Funktionen</b> nach unten gereicht werden.
            </li>
            <li>
              Eine Kind-Komponente kann die √ºbergebene Funktion aufrufen und ein "Event" (mit oder
              ohne Daten) an ihre Eltern-Komponente schicken. <br />Dieses Verfahren haben wir
              bereits beim onChange-Property am input-Feld gesehen!
            </li>
          </ol>
        </section>

        <section>
          <h3>Smart und Dumb-Komponenten #1</h3>

          <p>
            Zur Erinnerung: in React bauen wir Komponenten. Komponenten bestehen aus Logik, Zustand
            und UI (HTML-Elemente und Styling)
          </p>
          <p>
            Ein bekanntes Muster ist, die Komponenten in zwei Arten aufzuteilen:
            <b>Smart (oder Controller)</b>- und <b>Dumb oder (Presentation-)</b>-Komponenten
          </p>
          <p>Technisch sind die Komponenten identisch, also "normale" React-Komponenten</p>
          <p>Nur ihre <b>Aufgabe</b> ist anders definiert...</p>
        </section>

        <section>
          <h3>Smart und Dumb-Komponenten #2</h3>
          <p>Smart-Komponenten enthalten Logik und Zustand</p>
          <p>Dumb-Komponenten sind nur zur Darstellung der Daten</p>
          <p>
            Smart-Komponenten reichen Zustand in die Dumb-Komponenten. Diese zeigen den Zustand an
          </p>
          <p>
            Smart-Komponenten reichen Callback-Funktion als Event-Handler an die Dumb-Komponenten
          </p>
          <p>
            Wenn in Dumb-Komponenten ein Ereignis eintritt (z.B. Button-Click oder Texteingabe),
            wird eine Callback-Funktion aufgerufen
          </p>
          <p>
            Die Callback-Funktion wird dann in der Smart-Komponente aufgerufen und die Verarbeitung
            ausgef√ºhrt
          </p>
          <p>
            Die Smart-Komponente setzt ihren Zustand neu, und rendert sich und ihre Kinder (die
            Dumb-Komponenten) neu <br /><b
              >Der "Gesamt-Zustand" der Anwendung bleibt somit immer konsistent!</b
            >
          </p>
        </section>
        <section>
          <img src="slides/images/blogpost-app-hierarchy.png" />
        </section>

        <section>
          <h3>Beispiel</h3>

          <p>
            Unsere Smart-Komponente h√§lt eine Liste von Blog-Posts und steuert, welche Ansicht aktiv
            ist
          </p>
          <p>Die Smart-Komponente gibt die Liste der Blog-Posts an die BlogList zum Anzeigen</p>
          <p>
            Die Smart-Komponente gibt jeweils eine Callback-Funktion an die BlogList und die
            PostEditor
          </p>

          <pre><code>
function App() {
  const [posts, setPosts] = React.useState([]);
  const [view, setView] = React.useState("list");

  function addPost(newPost) {
    // Neuen Post hinzuf√ºgen
    setPosts([...posts, newPost]);

    // Wieder Liste anzeigen
    setView("list");
  }

  if (view === "list") {
    return &lt;BlogList posts={posts} onAdd={() => setView("PostEditor")} />
  }

  return &lt;PostEditor onAdd={addPost} />

}            
</code></pre>
        </section>

        <section>
          <h3>Beispiel #2</h3>

          <p>
            Die BlogList zeigt die √ºbergebene Liste nur an und informiert die App, wenn auf den
            "Add"-Button gedr√ºckt wurde
          </p>
          <p>Die App kann dann die andere Komponente (PostEditor) anzeigen</p>

          <pre><code>
  function BlogList(props) {

    return &lt;div>
      // ... Liste anzeigen ...
      &lt;button onClick={props.onAdd}>Add Blog Post&lt;/button>
    &lt;/div>;
  }            
  </code></pre>
        </section>

        <section>
          <h3>Beispiel #3</h3>

          <p>
            Die PostEditor erfasst einen neuen BlogPost und √ºbergibt diesen der Callback-Funktion,
            so dass die App-Komponente ihn in die Liste der BlogPosts (State) einf√ºgen kann
          </p>
          <pre><code>
  function PostEditor(props) {
    const [title, setTitle] = React.useState("");
    const [body, setBody] = React.useState("");

    function addPost() {
      const newPost = {
        title, body
      }

      // App-Komponente informieren
      props.onAdd(newPost);
    }

    return &lt;div>
      // ... Formular rendern ...
      &lt;button onClick={addPost}>Save Post&lt;/button>
    &lt;/div>;
  }            
  </code></pre>
        </section>

        <section>
          <h2>√úbung: Baue eine komplette "Anwendung"</h2>
          <p>
            <em>
              Integriere deine bestehende <code>PostEditor</code>-Komponente und die neue
              <code>PostList</code> Komponente √ºber die <code>App</code>-Komponente</em
            >
          </p>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol class="xx-list">
            <li>
              kopiere das Material aus <code>blog-example/material/3-hierarchy/src</code> in deinen
              source Ordner
              <span style="font-size: 85%"
                >(Du kannst deinen eigenen <code>PostEditor</code> verwenden oder den aus
                material/3-hierarchy)</span
              >
            </li>

            <li>
              Erweitere die <code>App</code> Komponente, so dass sie den
              <code>PostEditor</code> anzeigt, wenn der User auf den <code>Add</code> Button klickt.
              <p>- In <code>App.js</code> stehen TODOs mit weiteren Infos</p>
            </li>
            <li>
              Im<code>PostEditor</code> ben√∂tigst Du einen Save Button, der die √ºbergebene
              Callback-Funktion aufruft, die von der <code>App</code> als Property
              (<code>onSave</code>) √ºbergeben wird. <br />Siehe TODO in
              <code>blog-example/material/3-hierarchy/src/PostEditor.js</code>
            </li>
            <li>M√∂gliche L√∂sung: <code>steps/3-hierarchy</code></li>
            <li>Wenn Du fertig bist, bitte in Teams "Hand heben" üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <section id="t-server">
          <h1>Teil IV</h1>
          <h2>Server Zugriffe</h2>
          <em>Lesen und Schreiben von Daten von einem Backend (REST/HTTP)</em>
          <p><code>blog-example/steps/4-remote</code></p>
        </section>

        <section>
          <h3>Themen</h3>
          <ol>
            <li>Wie machen wir das Laden und Speichern technisch?</li>
            <li>Wie funktioniert asynchrone Verarbeitung in React?</li>
          </ol>
        </section>

        <section data-markdown>
          <textarea data-template>
## Zugriff auf Daten vom Server

* Kommunikation erfolgt in der Regel per REST API
  * Server stellt REST API zur Verf√ºgung, das Frontend fragt die ben√∂tigten Daten dar√ºber ab
  * Das Frontend hat keine direkte Verbindung zur Datenbank
  * In einer "echten" Anwendung w√ºrde der Client ggf. Cookies/HTTP Header mit Credentials mitschicken
    * _**Der Server** muss sicherstellen, dass er keine unerlaubten Daten herausgibt / entgegennimmt_


          </textarea>
        </section>

        <section>
          <h3>Server-Calls</h3>
          <ul class="x-list">
            <li>React macht keine Angabe, wie Server-Calls (technisch) gemacht werden</li>
            <li>
              H√§ufig in React verwendet: <b>fetch</b> API
              <ul>
                <li>Browser-API zum Ausf√ºhren von HTTP Requests</li>
                <li>
                  <a href="http://caniuse.com/#search=fetch" target="_blank">hohe Verbreitung</a>
                </li>
                <li>
                  Spezifikation:
                  <a href="https://fetch.spec.whatwg.org/" target="_blank"
                    >https://fetch.spec.whatwg.org/</a
                  >
                </li>
                <li>
                  Polyfill:
                  <a href="https://github.com/github/fetch" target="_blank"
                    >https://github.com/github/fetch</a
                  >
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <section id="t-promises">
          <h3>Hintergrund: Promises in JavaScript</h3>

          <p class="fragment">
            Ein Promise liefert einen "Versprechen" auf einen Wert zur√ºck, der evtl. erst in der
            Zukunft ermittelt werden kann
          </p>
          <p class="fragment">
            Damit k√∂nnen wir asynchrones Verhalten in JavaScript Applikation abbilden
          </p>
        </section>
        <section>
          <pre><code class="javascript" contenteditable>
// "getNameAsync" ist eine ausgedachte Funktion, 
// die ein Promise zur√ºckliefert, 
// das "irgendwann" den String "Klaus" zur√ºckgibt
const promise = getNameAsync();
  </code></pre>
          <pre
            class="fragment"
          ><code class="javascript" contenteditable>promise.then(name => console.log(name));
// Ausgabe "irgendwann": "Klaus"
  </code></pre>
        </section>

        <section>
          <h3>Alternative API zu Promises</h3>
          <h2>async / await</h2>
        </section>

        <section>
          <h3>async / await</h3>
          <p>"Nur" andere Schreibweise f√ºr Promises</p>
          <p>Promises und async/await Syntax sind untereinander kompatibel</p>
          <p>Erlaubt es, asynchronen Code "linear" hinzuschreiben</p>
        </section>
        <section>
          <h3>async / await</h3>
          <p><code>await</code> wartet bis ein Promise aufgel√∂st wird</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
    function greet(name) { return new Promise(...); }
    
    // await can only be used in 'async'-functions:
    async function sayWhat(name) {
      const greeting = await greet(name);
    
      // greeting is a string!
      console.log(greeting); // => Hello, ...
    }
                      </code></pre>
        </section>
        <section>
          <h3>async / await</h3>
          <p><code>async</code> machen eine Funktion zu einer "async function"</p>
          <p class="fragment">
            Eine <code>async</code> Funktion gibt &nbsp; <b>immer</b> ein Promise zur√ºck
          </p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
  async function greet(name) {
    return `Hello, ${name}`;
  }
  
  const greeting = greet('Klaus');
  
  // greeting is a Promise!
  console.log(greeting instanceof Promise); // => true
  console.log(greeting) // => Promise {&lt;resolved>: "Hello, Klaus"}
                  </code></pre>
        </section>

        <section>
          <h3>async / await</h3>
          <p>Fehlerbehandlung mit try...catch</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
  // Return promises
  async function loadUser(username) { . . . };
  async function loadProfileDate(userId) { . . .};
  
  async function loadData() {
    try {
      const user = await loadUser('klaus');
      const profile = await loadProfileData(user.userId);
    } catch (e) {
      console.error("Something failed")
    }
  }
                      </code></pre>
        </section>

        <section>
          <h3>Die fetch API</h3>
          <p>Lesen von Daten (mit HTTP GET)</p>
          <p>
            <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API Doku</a>
          </p>
          <pre><code class="javascript"  >
// Beispiel mit async/await:

const response = await fetch('http://localhost:7000/posts');
if (!response.ok) {
  // http status code nicht 2xx
  console.error("Request failed")
  return;
}

const posts = await response.json();
</code></pre>
        </section>

        <section>
          <h3>Die fetch API</h3>
          <p>Schreiben von Daten mit HTTP POST</p>
          <p><code>fetch</code> erwartet als 2. Parameter ein Konfigurationsobjekt:</p>
          <ul>
            <li>
              <code>method</code>: HTTP Methode (<code>PUT</code>, <code>POST</code>,
              <code>DELETE</code>, ...)
            </li>
            <li><code>headers</code>: HTTP Header f√ºr den Request (z.B. Authorization)</li>
            <li><code>body</code>: Der Payload (als String!)</li>
            <li>
              <p>Der Returnwert ist derselbe wie bei GET</p>
              <pre><code class="javascript"  >
  const response = await fetch(url, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(payload)
  })
  // Behandlung von response analog zum GET-Beispiel 
      </code></pre>
            </li>
          </ul>
        </section>

        <section data-markdown>
          <textarea data-template>
### TanStack Query            
* Mit fetch k√∂nnen wir Daten vom Server laden (und schreiben)
* Wir m√ºssen fetch mit React verbinden
* Typische Bibliotheken daf√ºr: [TanStack Query](https://tanstack.com/query) (ehem. React Query) und [SWR](https://swr.vercel.app/) 

---

### Schritt-f√ºr-Schritt: Laden und speichern von Daten mit "TanStack Query"

* üëâ `steps/3-hierarchy`

---

### Der QueryClient

* Zentrales Konfigurationsobject: `QueryClient`
  * React-unabh√§ngig
* Wird beim Starten der Anwendung initialisiert
  * Oft reichen Default-Einstellung
  * Es k√∂nnen aber z.B. globale Refetch-Policies eingestellt werden
* Das Objekt wird per QueryClientProvider in die Anwendung gereicht
* ```typescript

  const queryClient = new QueryClient({
    defaultOptions: {
      queries: {
        refetchOnWindowFocus: false
      }
    }
  });

  root.render(
    <QueryClientProvider client={queryClient}>
      <App />
    </QueryClientProvider>
  );

  ```

---

### Laden von Daten: useQuery

* Queries werden mit dem [useQuery-Hook](https://tanstack.com/query/v4/docs/guides/queries) ausgef√ºhrt
* Der Hook erwartet bis zu drei Parameter:
  * Array mit Query Keys (zur Interaktion mit dem Cache)
  * Funktion zum Laden der Daten
  * Weitere Konfigurationen (optional)
* ```typescript
  import { useQuery } from "react-query";
  import { loadBlogPosts } from "./blog-api";
  function BlogListPage() {

    const result = useQuery(['posts'], loadBlogPosts);

    // ...
  }
  ```

---

### Query Keys

* Mit den [Query Keys](https://tanstack.com/query/v4/docs/guides/query-keys) wird ein Ergebnis im Cache gespeichert
* Ein Query Key besteht aus einem Array von Werten
* √úblicherweise ist es ein Name (z.B. "posts") und dann ggf. die Query-Parameter (z.B. "P1")
* ```typescript
  import { useQuery } from "react-query";
  import { loadBlogPosts } from "./blog-api";

  function BlogPage({blogPostId}) {

    // F√ºr jeden Aufruf mit einer neuen blogPostId
    //  wird das Ergebnis separat in den Cache gelegt
    const result = useQuery(['blogPost', blogPostId], () => loadPost(blogPostId) );

    // ...
  }
  ```
* Wenn ein Query mit denselben Query Keys in mehr als einer Komponente ausgef√ºhrt wird
  * stellt TanStack Query sicher, dass der Query nur einmal ausgef√ºhrt wird
  * wenn sich das Ergebnis √§ndert, werden alle Komponenten, die den Query verwenden,
    automatisch aus dem Cache aktualisiert
---

### Query Function

* `useQuery` erwartet eine [Query-Function](https://tanstack.com/query/v4/docs/guides/query-functions), die den eigentlichen Request ausf√ºhrt
* Die Signatur ist fast beliebig, die Funktion muss aber ein Promise zur√ºckliefern:
  * Wenn die Daten erfolgreich geladen wurden, muss das Promise mit den Daten "aufgel√∂st" werden
  * Wenn es einen Fehler gab, muss die Funktion einen Fehler werfen
* ```typescript
  // async function gibt IMMER ein Promise zur√ºck
  export async function loadBlogPost(postId) {
    const response = await fetch("http://localhost:7000/posts" + postId);

    if (!response.ok) {
      throw new Error("Could not load blog post: " + response.status);
    }

    return response.json();
  }
  ```

---

### R√ºckagebwert von `useQuery` (Query Ergebnis)

* `useQuery` liefert ein Objekt zur√ºck:
  * `status`, gibt Informationen √ºber den aktuellen Status des Queries:
    * `error`: Es ist ein Fehler aufgetreten
    * `loading`: Der Query l√§dt noch (und es sind keine Daten im Cache)
    * `success`: Daten sind geladen
  * `data` enth√§lt die geladenen Daten (wenn `status === 'success'`)
  * `error`: Fehlerobjekt aus der Query-Funktion ( wenn `status === 'error'`)    
  * `fetchStatus`: Gibt an, ob der Query gerade l√§uft
    * `idle`: Query l√§uft nicht
    * `fetching`: Query wird ausgef√ºhrt (wenn `status === 'loading' und `fetchStatus === 'fetching'` befinden
      sich Daten im Cache, aber der Query l√§uft und Cache wird ggf. aktualisiert)
* Weitere [siehe Doku](https://tanstack.com/query/v4/docs/reference/useQuery)

---

### TanStack Query: Mutations

* Mutations werden verwendet, um Daten zu schreiben
* Mutations haben keinen Cache-Key und werden auch nicht automatisch ausgef√ºhrt
* Die Mutation-Funktion entspricht der Query-Function (nur dass sie Daten scrheibt und nicht liest)
* Auch der `useMutation`-Hook liefert Informationen √ºber den Zustand der Mutation zur√ºck
* Au√üerdem wird eine Funktion (`mutate`) zur√ºckgeliefert, die die Mutation ausf√ºhrt
  * √úbergeben wird der der Funktion die zu schreibenden Daten
* ```typescript
  import { useMutation } from "react-query";
  import { savePost } from "./blog-api";

  function PostEditorPage() {
    const mutation = useMutation(savePost, {
      onSuccess() {
        // optional: wird aufgerufen, wenn die Mutation erfolgreich war
        // ...
      }
    });

    if (mutation.status === "error") {
      return <h1>Error!</h1>;
    }

    if (mutation.status === "loading") {
      return <h1>Saving, please wait!</h1>;
    }

    return <PostEditor onSavePost={mutation.mutate} />;
  }
  ```

---

### Aktualisieren von Daten

* Alle Query-Ergebnisse von `useQuery` werden automatisch gecached
* Alle Komponenten werden aktualisiert, wenn sich der Cache aktualisiert
* Alle Daten im Cache werden als "stale" (veraltet) angesehen
* [Per Default](https://tanstack.com/query/v4/docs/guides/important-defaults) werden Queries deswegen automatisch neu ausgef√ºhrt:
  * Komponente wird (neu) gemounted
  * Browser-Fenster bekommt den Focus
  * Nachdem das Netzwerk offline war
  
---

### Manuelles Aktualisieren von Queries

* Queries k√∂nnen per API manuell erneut ausgef√ºhrt werden
* Das kann zum Beispiel nach einer Mutation sinnvoll sein, um die ge√§nderten/gespeicherten Daten 
  im Cache zu aktualisieren
* Dazu wird die Funktion [`invalidateQueries`](https://tanstack.com/query/v4/docs/reference/QueryClient#queryclientinvalidatequeries) vom `QueryClient` verwendet
  * √úbergeben werden die Query Keys, deren Queries erneut ausgef√ºhrt werden sollen
* ```typescript
  import { useMutation, useQueryClient } from "react-query";
  import { savePost } from "./blog-api";

  function PostEditorPage() {
    const queryClient = useQueryClient();
    const mutation = useMutation(savePost, {
      onSuccess() {
        // PostPage-Query erneut ausf√ºhren, wenn Mutation erfolgreich war
        queryClient.invalidateQueries(['posts']);
      }
    });

    // ...
  }
  ```

---

### Beispiel: Blog-Post nicht neuladen

* Ein einzelnes BlogPost kann im Cache verbleiben, da es sich in unserer App nicht √§ndert/nicht √§ndern kann
* Mit den `refetch`-Funktionen kann die automatische Aktualisierung ausgeschaltet werden
* ```typescript
  function PostPage() {
    // ...
    const result = useQuery(["blogPost", postId], () => loadBlogPost(postId!), {
      refetchOnMount: false,
      refetchOnWindowFocus: false
    });  

    // ...
  }
  ```

---

### Refetch

* Das von `useQuery` zur√ºckgeliefert Objekt enth√§lt auch eine `refetch`-Funktion um einen Query
  manuell neu auszuf√ºhren
* ```typescript
  function PostListPage() {
    const result = useQuery(['posts', readPosts], {
      // nicht automatisch aktualisieren
      refetchOnMount: false, refetchOnWindowFocus: false
    })

    // ... result.status === loading, status === error ... 

    return <div>
      <button onClick={refetch}>Reload Posts</button>
      <PostList posts={data} />
    </div>
  }
  ```


---


## √úbung: Die Blog-Anwendung mit TanStack Query

* _Vervollst√§ndige den Query zum Laden und Speichern mit TanStack Query_
* Backend starten
  * Das Backend ist bereits fertig. Du kannst es starten mit:
  * ```
  cd react-training/blog-example/backend-rest
  npm start
  ```
* Schritte:
  * Kopiere `index.js` und `App.js` aus `material/4-remote-query` in dein `src`-Verzeichnis
  * In `App.js` findest Du TODOs mit weiteren Hinweisen
* M√∂gliche L√∂sung findest Du in `steps/4-remote-query`
* Wenn Du fertig bist, bitte "Hand heben" in Teams üôã‚Äç‚ôÄÔ∏è

---
    </textarea
          >
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Alternative: useEffect und fetch</h3>

          <ul>
            <li>
              Dieser Ansatz ist sehr weitverbreitet, wird aber mittlerweile
              <a href="https://beta.reactjs.org/learn/synchronizing-with-effects"
                >nicht mehr empfohlen ("What are good alternatives to data fetching in Effects?")</a
              >
            </li>
            <li></li>
          </ul>
        </section>

        <section>
          <h3>Fetch-on-Render</h3>
          <p>Wir k√∂nnen den Server-Aufruf beim Rendern der Komponente triggern</p>
          <p>
            Bis die Daten verf√ºgbar sind (w√§hrend des laufenden Server Requests) zeigen wir einen
            Loading Indicator
          </p>
        </section>

        <section>
          <h3>Seiteneffekte</h3>
          <p>
            Server-Aufrufe sind <b>Seiteneffekte</b> (andere Beispiele: DOM manipulieren, WebSocket
            √∂ffnen)
          </p>
          <p>Seiteneffekte sind in der <b>Renderphase</b> einer Komponente verboten!</p>
        </section>

        <section>
          <h3>useEffekt-Hook</h3>
          <p>
            <em
              >Mit useEffekt kann eine Funktion registriert werden, die nach dem Rendern der
              Komponente ausgef√ºhrt wird</em
            >
          </p>

          <div>
            <pre><code class="javascript"  >
            function App(props) {
              React.useEffect( 
                () => console.log("I will run after EACH render")
              );
            }
          </code></pre>
          </div>
          <div>
            2. Parameter (leeres Array) gibt an, dass die Funktion nur einmal ausgef√ºhrt werden soll
            <pre><code class="javascript"  >
              function App(props) {
                React.useEffect( 
                  () => console.log("I will run only once after 1st rendering"),
                  []
                );
              }
            </code></pre>
          </div>
        </section>

        <section>
          <h3>useEffect Hook</h3>

          <p>Zwei Parameter:</p>
          <ol>
            <li>
              Callback-Funktion, die aufgerufen wenn entsprechendes Ereignis eintritt (z.B.
              initiales Rendern abgeschlossen)
            </li>
            <li>
              Ein Array mit Abh√§ngigkeiten:
              <ul>
                <li>
                  Wenn kein Array angegeben wird, wird der Effekt nach jedem Rendern ausgef√ºhrt
                  (achtung! Endlosschleife m√∂glich)
                </li>
                <li>
                  Wenn ein leeres Array angegeben wird, wird der Effekt nur nach dem 1. Rendern
                  ausgef√ºhrt
                </li>
                <li>
                  Wenn Werte angegeben werden, wird der Effekt ausgef√ºhrt, wenn sich mind 1 Wert
                  ver√§ndert hat
                </li>
                <li>
                  <b>Wichtig!</b> <em>Alle</em> Werte im Dependency-Array angeben, die darin
                  verwendet werden (Werte aus Props, State, ...)
                </li>
              </ul>
            </li>
            <li>
              Um auf das Entfernen der Komponente aus dem DOM zu reagieren (z.B Resourcen
              freigeben), kann die Callback-Funktion eine weitere Funktion zur√ºckliefern, die dann
              ausgef√ºhrt wird:
              <pre><code class="javascript"  >
                  function GreetingController(props) {
                    React.useEffect(
                      () => {
                        console.log("greetingId hat sich ge√§ndert"); 
                        return () => console.log("Ich bin entfernt worden") 
                      },
                      [props.greetingId])
                    );
                  }
                </code></pre>
            </li>
          </ol>
        </section>

        <section>
          <h3>Beispiel: initiales Laden von Daten</h3>

          <div>
            <p>
              <code>useEffect</code> und (<code>useState</code>) werden verwendet um die initialen
              Daten zu laden
            </p>
            <pre><code class="javascript"  >
                function App() {
                  const [posts, setPosts] = React.useState([]);
                
                  React.useEffect(() => {
                    fetch("http://localhost:7000/posts")
                      .then(response => response.json())
                      .then(json => setPosts(json));
                  }, []);

                  return {posts.map(p => (
                    &lt;Post key={p.id} post={p} />
                  ))}
                }
                
                </code></pre>
          </div>
        </section>

        <section>
          <h3>Speichern von Daten</h3>
          <p>Als Folge einer Benutzerinteraktion:</p>
          <p>In einem Event-Handler k√∂nnen Seiteneffekte verwendet werden!</p>
          <pre><code class="javascript"  >
function App(props) {
  // load, as seen
  React.useEffect( ... );

  function addPost(post) {
    fetch("http://localhost:7000/posts", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(post)
    })
      .then(response => response.json())
      .then(newPost => setPosts([newPost, ...posts]));
  }


  return
    ...
      &lt;AddPost onAdd={newPost => addPost(newPost)} />
    ...
}
                </code></pre>
        </section>

        <section id="t-typescript">
          <h2>TypeScript</h2>
          <ol>
            <li><a href="#/t-typescript-grundlagen">Einf√ºhrung in TypeScript</a></li>
            <li><a href="#/t-typescript-react">React mit TypeScript</a></li>
          </ol>
        </section>

        <section id="t-typescript-grundlagen">
          <h2>Einf√ºhrung: Die Sprache TypeScript</h2>
          <p class="fragment">
            <em>TypeScript is a superset of JavaScript that compiles to plain JavaScript </em>(
            <a href="http://www.typescriptlang.org/" target="_blank"
              >http://www.typescriptlang.org/</a
            >)
          </p>
          <ul>
            <li class="fragment">Erweitert JavaScript um ein Typen System</li>
            <li class="fragment">
              Jeder g√ºltige JavaScript Code ist auch g√ºltiger TypeScript Code
            </li>
            <li class="fragment">
              Mittels des TypeScript Compilers wird aus TS Code JavaScript Code
            </li>
          </ul>
        </section>

        <section>
          <h3>TypeScript Grundlagen</h3>
          <p>Typ-Angaben werden hinter einen Bezeichner geschrieben</p>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  // Variablen k√∂nnen Typ-Informationen bekommen
  let foo: string;
  foo = 'yo';
  // Error: number: This type is incompatible with string
  foo = 10;
                 </code></pre>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  // Funktionen
  function sayIt(what: string): string {
    return `Saying: ${what}`;
  }
  
  sayIt('Klaus'); // ok
  sayIt(10); // error
  </code></pre>

          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  // Arrow Funktionen
  const sayIt = (what: string): string => `Saying: ${what}`;
  
  sayIt('Moin');
  sayIt(123); // Error: Argument of type '123' is not assignable
              // to parameter of type 'string'.
  </code></pre>
        </section>

        <section>
          <h2>Eingebaute Typen</h2>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  // string
  let city: string = 'Hamburg';
  
  // boolean
  let isDone: boolean = false;
  
  // number
  let theAnswer: number = 42;
  
  // array (note the [])
  let cities: string[] = ['Hamburg', 'Barcelona'];
  // alternative:
  let languages: Array&lt;string> = ['JavaScript', 'TypeScript'];
  
  // void
  function log(s: string): void { /* ... */ }
              </code></pre>
        </section>
        <section>
          <h2>Eingebaute Typen: any und unknown</h2>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  // any: kann alle Typen aufnehmen, Typ-Pr√ºfung ist ausgeschaltet
  let theUnknown: any = 'Who cares';
  theUnknown = 666; // ok
  theUnknown = true; // ok
  let a: number = theUnknown; // ok
  function loadData(): any { return "" // ok }
  let b:number = loadData(); // ok
  
              </code></pre>
        </section>
        <section>
          <h2>Eingebaute Typen: any und unknown</h2>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  // unknown: kann ebefalls alle Typen aufnehmen, erzwingt aber vor der Verwendung Typ-Pr√ºfung
  function loadData(): unknown { return "" // ok }
  let b = loadData(); 
  b.toUpperCase(); // ERROR
  if (typeof b === "string") {
    // b ist jetzt string (typeof ist Laufzeitpr√ºfung!)
    b.toUpperCase(); // OK
  }
              </code></pre>
        </section>
        <section>
          <h2>Typen k√∂nnen abgeleitet (inferred) werden</h2>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  let city = 'Hamburg'; // city ist ein String
  
  city = 42;
  // Fehler: [ts] Type '42' is not assignable to type 'string'.
  </code></pre>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  // Explizite Angabe eines Types (parameter)
  // und abgeleiteter Typ (Return Type der Funktion)
  
  function sayIt(what: string) {
    return `Saying: ${what}`;
  }
  
  const said: string = sayIt('Hello TypeScript'); // ok
  const saidItWrong: number = sayIt('Hello TypeScript'); // error!
  
  
  </code></pre>
        </section>

        <section>
          <h2>Type Check ausschalten</h2>
          <p>
            Mit <code>@ts-ignore</code> (als Kommentar) kann wird die √úberpr√ºfung der n√§chsten Zeile
            ausgeschaltet:
          </p>
          <pre><code class="typescript line-numbers" contenteditable data-trim>
  let city:string = "Hamburg";
  
  city = 20259; // error: [ts] Type '20259' is not assignable to type 'string'.
  
  // @ts-ignore
  city = 20259; // ok                
  </code></pre>
          <p class="fragment">
            N√ºtzlich in corner cases, die nur schwer mit TypeScript abbildbar sind oder bei
            Migration
          </p>
        </section>
        <section>
          <h2>null und undefined</h2>
          <div class="fragment">
            <p><code>null</code> muss explizit zugelassen werden <em>(strictNullChecks</em>):</p>
            <pre><code class="typescript line-numbers" contenteditable data-trim>
  let city:string = null; //Type 'null' is not assignable to type 'string'.
  
  let optionalCity:string|null = null; // OK
              </code></pre>
          </div>
          <div class="fragment">
            <p><code>undefined</code> muss ebenfalls explizit zugelassen werden:</p>
            <pre><code class="typescript line-numbers" contenteditable data-trim>
    let city:string = undefined; //Type 'undefined' is not assignable to type 'string'.
    
    let optionalCity:string|undefined = undefined; // OK
    let optionalCity:string|undefined|null = null; // OK
                </code></pre>
          </div>
          <div class="fragment">
            <p>
              Optionale Parameter k√∂nnen mit ? gekennzeichnet werden (erlauben dann auch
              <code>undefined</code>)
            </p>
            <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
  function greet(name: string, greeting?: string) {
    console.log(`${greeting || 'Hello'}, {name}`);
  }
  
  greet('Susi', 'Moin')// Moin, Susi
  
  // 2. Parameter ist optional:
  greet('Klaus'); // Hello, Klaus
  
  greet('Peter', null); // Argument of type 'null' is not assignable
                        // to parameter of type 'string | undefined'.
              </code></pre>
          </div>
        </section>

        <section>
          <h2>Eigene Typen</h2>
          <p>
            Mit <code>interface</code> und <code>type</code>k√∂nnen eigene Typen (Objekt-Strukturen)
            definiert werden:
          </p>

          <pre><code data-trim contenteditable class="line-numbers typescript" data-leftpad>
  // Komplexer Typ
  interface Person {
    name: string; // Pflicht
    livesIn?: string; // Optional
  }

  // Alternativ (interface und type fast synonym)
  type Person = { name: string; livesIn?: string; }
  
  const susi: Person = { // OK
    name: 'Klaus',
    livesIn: 'Hamburg'
  };
  const klaus: Person = { // OK (livesIn ist optional)
    name: 'Klaus'
  }
  
  const helmut: Person = {} // Error: Property 'name' is missing
  
  const lukas: Person = {
    name: 'Lukas',
    profession: 'Lokf√ºhrer'
  } // Error: 'profession' does not exist in type 'Person'.
                 </code></pre>
        </section>

        <section>
          <h2>Eigene Typen II</h2>
          <p>Eigene Objekt-Typen k√∂nnen sowohl "Attribute" als auch Funktionen enthalten:</p>
          <pre><code data-trim contenteditable class="line-numbers typescript" data-leftpad>
            // Komplexer Typ
            type Person {
              name: string; // Pflicht
              greet(greeting: string): string;
            }

            const p:Person = {
              name: "Klaus",
              greet(greeting: string) { 
                return `${greeting}, ${this.name}`
              }
            }
            p.greet("Hello"); // OK
            p.greet(123); // ERR: Argument of type '123' is not 
                          // assignable to parameter of type 'string'.

            const wrong:Person = {
              name: "Susi", // OK
              greet(greeting: number) {¬†return "hello" } 
                // ERR: Type '(greeting: number) => string' is not assignable to 
                //      type '(greeting: string) => string'.
                //      Types of parameters 'greeting' and 'greeting' are incompatible.
                //      Type 'string' is not assignable to type 'number'.
            }
                           </code></pre>
        </section>
        <section>
          <h2>Union Types</h2>
          <p>Variablen, Parameter etc. k√∂nnen mehr als einen Typ annehmen:</p>
          <pre><code data-trim contenteditable class="line-numbers typescript" data-leftpad>
type Person = { name: string };
type Movie = { title: string };

function printNameOrTitle(obj: Person | Movie) { 

  console.log(obj.title); // ERR: Property 'title' does not 
                          // exist on type 'Person | Movie'
 
  if ("title" in obj) { // Abfrage ist ein "Type Guard"
    // obj ist Movie hier, title ist definiert
    console.log(obj.title);
  } else {
    // obj ist Person hier: name ist definiert
    console.log(obj.name);
  }
}

printNameOrTitle({name: "Klaus"}); //OK
printNameOrTitle({title: "Pulp Fiction"}); //OK
printNameOrTitle({label: "Save"}); // ERR
    
          </code></pre>
        </section>
        <section>
          <h2>Type Guards</h2>
          <p>Durch einen Type Guard k√∂nnen Typen "eingeengt" werden</p>
          <pre><code data-trim contenteditable class="line-numbers typescript" data-leftpad>
type Person = { name: string };
type Movie = { title: string };

// Wenn diese Funktion true zurueckgibt, nimmt Typescript an,
// dass das √ºbergebene Argument vom Typ Movie ist
function isMovie(candidate: any): candidate is Movie {
  return ("title" in candidate);
}

function printNameOrTitle(obj: Person | Movie) { 
  if (isMovie(obj)) {
    // movie
  }
}
    
          </code></pre>
        </section>
        <section>
          <h2>Type Assertions</h2>
          <pre><code data-trim contenteditable class="line-numbers typescript" data-leftpad>
type Person = { name: string };
type Movie = { title: string };

// Wenn diese Funktion zurueckkehrt (kein Error geworfen wird) nimmt Typescript an,
// dass das √ºbergebene Argument vom Typ Movie  ist
function assertIsMovie(candidate: any): asserts candidate is  Movie {
  if ("title" in candidate) {
    return;
  }
  throw new Error("Candidate is not a movie!")
}

function printTitle(hopefullyAMovie: any) { 
  assertPersonIsMovie(hopefullyAMovie)
  // hopefullyAMovie ist jetzt Movie
  hopefullyAMovie.title; // OK
}
    
          </code></pre>
        </section>
        <section>
          <h2>String Literal Types</h2>
          <p>Beispiel: String Aufz√§hlungstyp</p>
          <pre><code data-trim contenteditable class="line-numbers typescript" data-leftpad>
// Beispiel:             
type View = "POST_LIST" | "POST_EDITOR";

const s:View = "POST_LIST"; // OK
const t:View = "POST_LISTE" // FEHLER

function setView(v: VIEW) {
    if (v === "POST_LIST") { ... } // ok
    if (v === "POST_LISTE") { ... } // error: immer false
}

setView("POST_LIST"); //OK
setView("POST_LISTE"); // ERROR
          </code></pre>
        </section>
        <section id="t-typescript-react">
          <h2>React Anwendungen mit TypeScript</h2>
          <em
            >State und Properties einer Komponente k√∂nnen mit TypeScript Typen beschrieben weden</em
          >
          <p>
            Achtung! TypeScript-Dateien, die JSX-Code enthalten, <b>m√ºssen</b> mit
            <code>.tsx</code> enden!
          </p>

          <p>
            üëâ Lasst uns ausprobieren, wie das funktioniert! (<code>workspace-typescript</code>)
          </p>
        </section>
        <section>
          <h2>Typsicherheit in Funktionskomponenten</h2>
          <pre><code class="line-numbers typescript" data-leftpad>
type PostListProps = {
  posts: BlogPost[];
  onAddPost(): void;
};
            </code></pre>
          <pre><code class="line-numbers typescript">
function BlogList(props: PostListProps) {
  props.posts.length // OK
  
  props.post // compile ERROR: Property 'post' does not exist on type 'PostListProps'.
  props.onAddPost("huhu"); // compile ERROR: Expected 0 arguments, but got 1.
}
    
            </code></pre>
          <pre><code class="line-numbers typescript" data-leftpad>
// Mit Destructuring
function BlogList({posts, onAddPost}: GreetingMasterProps) => {
  // ...
}
            </code></pre>
        </section>

        <section>
          <h3>Typ-sichere Verwendung von Komponenten</h3>

          <div>
            <p>Code Completion</p>
            <img style="height: 200px" src="slides/images/screenshot-ts-code_completion.png" />
          </div>

          <div>
            <p>Unbekanntes Property</p>
            <img style="height: 200px" src="slides/images/screenshot-ts-error-01.png" />
          </div>

          <div>
            <p>Fehlerhafte Verwendung eines Properties</p>
            <img style="height: 200px" src="slides/images/screenshot-ts-error-02.png" />
          </div>
        </section>

        <section>
          <h3>Typ-sicherheit in useState</h3>
          <p>Der Typ von useState kann grunds√§tzlich von TypeScript hergeleitet werden</p>
          <pre><code class="line-numbers typescript" data-leftpad>
type PostEditorProps = {  onSavePost(post: NewBlogPost): void; };
function PostEdior(props: PostEditorProps) {
  const [title, setTitle] = React.useState("");

  // greeting is string, because initial value is a string
  setGreeting("huhu"); // OK
  setGreeting(666); // ERROR (wrong Type)
  setGreeting(null); // ERROR (wrong Type)
}
            </code></pre>
          <div>
            <p>Du kannst alternativ den Typen auch explizit setzen</p>
            <p>Zum Beispiel notwendig, wenn der State mehr als einen Typen aufnehmen kann</p>
            <pre><code class="line-numbers typescript" data-leftpad>
type VIEW = "LIST" | "ADD";

function App() {
  const [view, setView] = React.useState&lt;VIEW>("LIST");

  // Mode ist either string "MODE_MASTER" or "MODE_DETAIL"
  // setMode only accepts the string "MODE_MASTER" and "MODE_DETAIL" 

  setMode("NOT_FOUND"); // compile error
  setMode(null); // compile error
}
                            </code></pre>
          </div>
        </section>

        <section>
          <h2>React Events in TypeScript</h2>
          <p>
            Events in React sind Instanzen von <code>React.SyntheticEvent</code>, die die nativen
            DOM Events wrappen (und so "√§hnlich" aussehen)
          </p>
          <p>
            In TypeScript gibt es f√ºr die konkreten Events eigene Typen (z.B. ChangeEvent,
            MouseEvent)
          </p>
          <p>
            Die Event-Typen erwarten einen Typ-Parameter, der auf den Typ des HTML Elements gesetzt
            werden muss, das das Event ausl√∂st
          </p>
          <p>TypeScript kennt dann die Eigenschaften des Events bei der Verarbeitung</p>
          <span>
            <pre><code class="line-numbers typescript" data-leftpad>
function PostEditor(props) {
  const [title, setTitle] = React.useState("");

  function handleChange(e: React.ChangeEvent&lt;HTMLInputElement>) {
    setTitle(e.currentTaget.value);
  }

  return &lt;input onChange={handleChange} value={title} />
}              
          </code></pre>
            <a
              href="https://github.com/DefinitelyTyped/DefinitelyTyped/issues/11508#issuecomment-256045682"
              target="_blank"
            >
              <code>target</code> vs
              <code>currentTarget</code>
            </a>
          </span>
        </section>

        <section>
          <h2>√úbung: Typ-sichere React Komponenten</h2>
          <h3>
            <em>F√ºge die fehlenden Typ-Informationen zu der App-Anwendung hinzu</em>
          </h3>
          <div style="font-size: 80%">
            <div>
              <p>
                <b>WORKSPACE:</b>
              </p>
              <p>
                Bitte benutze den Workspace <code><b>blog-example/workspace-typescript</b></code
                >. <br />Dieser enth√§lt die letzte Version unserer Anwendung, ist aber mit
                TypeScript konfiguriert.
              </p>
            </div>
            <div>
              <p>
                <b>VORBEREITUNG:</b>
              </p>
              <ol class="x-list">
                <li>Stop deinen laufenden "npm run"-Frontend-Prozess (ctrl+c)</li>
                <li>
                  F√ºhre <code><b>npm install</b></code> in
                  <code>blog-example/workspace-typescript</code> aus
                </li>
                <li>
                  F√ºhre <code><b>npm start</b></code> in
                  <code>blog-example/workspace-typescript</code> aus
                </li>
              </ol>
            </div>
          </div>
        </section>
        <section>
          <h3>√úbung: Typ Informationen hinzuf√ºgen</h3>
          <p>
            F√ºge die fehlenden Typ-Informationen in <code>PostList.js</code> und
            <code>PostEditor.js</code> hinzu
          </p>
          <ol style="font-size: 80%" class="x-list">
            <li>
              Benenne <code><b>PostList.js</b></code> in <code>PostList.tsx</code> um und starte
              <code>npm start</code> neu
            </li>
            <li>Stelle <code>PostList.tsx</code> auf TypeScript um</li>
            <li>
              Der Type f√ºr die MessageProps ist:

              <pre><code class="javascript">
type MessageProps = {
  msg: string;
  type: "error" | "info"
}
              </code></pre>
            </li>
            <li>
              Und f√ºr <code>style</code> in <code>Message</code>:
              <pre><code class="javascript">
const style: React.CSSProperties = type === "error" ? 
  { color: "red", fontWeight: "bold" } : { color: "green" };
              </code></pre>
            </li>
            <li>
              Benenne <code><b>PostEditor.js</b></code> in <code>PostEditor.tsx</code> um und starte
              <code>npm start</code> neu
            </li>
            <li>Stelle <code>PostEditor.tsx</code> auf TypeScript um</li>
            <li>Weitere Informationen kannst Du in den Dateien finden.</li>
            <li>M√∂gliche L√∂sung in <code>steps/5-typescript</code></li>
            <li>Wenn Du fertig bist, bitte "Hand heben" in Teams üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <section data-markdown>
          <textarea data-template>
            <!-- .slide: id="t-router" -->            
## Routing in React

* Anforderungen:
  * URLs auf Komponenten abbilden
  * (Interne) Links, die die Anwendung neu rendern, ohne zum Server zu gehen
* React bringt keinen Router mit
* In der Regel wird der [https://reactrouter.com/](https://reactrouter.com/) verwendet

---

## Der React Router

* Homepage: [https://reactrouter.com/](https://reactrouter.com/)
* Aktuelle Version v6
* Achtung: Verhalten und API haben sich in Version 4, 5 und 6 ge√§ndert.
  * Bei Beispielen/Dokumentation/Tutorial etc. die Version beachten!

---

## Der React Router

### Beispiel

```jsx
import { BrowserRouter, Routes, Route } from "react-router-dom";
export default function App() {
  &lt;Routes>
    &lt;Route path="/" element={<Page />}>
      &lt;Route index element={<PostListPage />} />
      &lt;Route path="/post/:postId" element={<PostPage />} />
      &lt;Route path="/add" element={<PostEditor onSavePost={savePost} />} />
      &lt;Route path="*" element={<NotFoundPage />} />
    &lt;/Route>
  &lt;/Routes>
}  
```

---

### Die Router-Komponente

* Als oberste Komponente muss eine `Router`-Komponente gerendert werden
  * Nur unterhalb (direkt oder indirekt) darf mit `Routes` und `Route` gearbeitet werden
* Router fest, welche URLs generiert werden soll:
* [`HashRouter`](https://reactrouter.com/docs/en/v6/routers/hash-router): Die Route wird durch Hash-Zeichen (`#`) getrennt hinter die URL geschrieben (Beispiel: `http://loalhost:8080#/post/1`)
  * √Ñnderungen in der URL hinter dem Hash-Zeichen f√ºhren im Browser nicht zum Neuladen der Seite vom Server!
  * Der Server wird also beim Seitenwechsel nie kontaktiert
* [`BrowserRouter`](https://reactrouter.com/docs/en/v6/routers/browser-router): Die Route wird direkt hinter die URL geschrieben. Sieht dann aus wie eine "normale" Route vom Server (Beispiel: `http://localhost:8080/post/1`)  
  * Empfohlene Implementierung
  * Bei der Navigation durch die Anwendung unterbindet der Router Server-Requests
  * Aber beim initalen Laden muss der Server sicherstellen, dass die URL gefunden wird
    * Dazu muss der Webserver entsprechend konfiguriert werden ("/..." -> index.html)

---

### Konfiguration der Routen: Welche Komponente soll f√ºr welche Route angezeigt werden?

* Mit [Routes und Route](https://reactrouter.com/docs/en/v6/components/route)-Komponenten gibt es eine Art "intelligentes" switch- oder if/else-Statement
* `Route`-Komponenten m√ºssen mit `Routes` umschlossen werden. Nach jedem √Ñndern der URL pr√ºft der Router alle `Routes`-Komponenten in allen `Route`-Komponenten der Anwendung
* ```javascript
  &lt;Routes>
    &lt;Route path="/" element={&lt;App />} /> 
    &lt;Route path="/blog" element={&lt;App />} />
  &lt;/Routes>
```
* `Route` funktioniert wie ein `if`-Statement: `if (path === "/post") renderElement &lt;Post />`

---

### Verschachtelte Routen

* `Route`-Komponenten k√∂nnen geschachtelt werden, um Hierchien abzubilden
* In den Child-Komponenten werden dann relative Pfade angegeben
* ```javascript
  &lt;Routes>
    &lt;Route path="/" element={&lt;App />}> &lt;!-- Rendert "/" -->
      &lt;Route path="blog" element={...}> &lt;!-- Rendert "/blog" -->
        &lt;Route path="new" element={...}/> &lt;!-- Rendert "/blog/new" -->
        &lt;Route path="post/:id" element={...}/> &lt;!-- Rendert "/blog/post/1" -->
      &lt;/Route>
    &lt;/Route>    
  &lt;/Routes>    
```
* Die Oberkomponente muss dann jeweils die Unterkomponenten rendern
  * Das funktioniert mit der [`<Outlet />`](https://reactrouter.com/docs/en/v6/components/outlet)-Komponente
  * ```javascript
    function App() {
      return &lt;div className="App">
        &lt;h1>Blog App</h1>
        &lt;Outlet />
      &lt;/div>
  }
```    

---

### Index Routes

* Bei verschachtelten Routen muss f√ºr die Ober-Route eine Index Route gerendert werden
* Beispiel:
* ```javascript
  &lt;Routes>
    &lt;Route path="/" element={&lt;App />}> 
      &lt;Route path="blog" element={&lt;Blog />} />
    &lt;/Route>    
  &lt;/Routes>    
```
* Hier wird `Blog` als `Outlet` in `App` f√ºr `/blog` gesetzt. Aber kein Outlet f√ºr `/`
* Dazu muss eine Index-Route definiert werden. Die wird unterhalb der Ober-Route eingesetzt und
  wird dann gerendert, wenn genau der Pfad der Ober-Route aufgerufen wird
* Statt `path` wird darin einfach `index` angegeben:  
  * ```javascript
    &lt;Routes>
      &lt;Route path="/" element={&lt;App />}> 
        &lt;Route index element={&lt;Home /> } /> &lt;!-- Rendert "App" mit Outlet "Home" f√ºr "/" -->
        &lt;Route path="blog" element={&lt;Blog />} /> &lt;!-- Rendert "App" mit Outlet "Blog" f√ºr "/blog" -->
      &lt;/Route>    
    &lt;/Routes>    
```


---

### Fallback Route

* Mit `path="*"` kann eine Fallback-Route angegeben werden, die aktiv ist, wenn keine andere Route passt
* Beispiel:
* ```javascript
    &lt;Routes>
      &lt;Route path="/" element={&lt;App />}> 
        &lt;Route path="blog" element={&lt;Blog />} />

        &lt;Route path="*" element={&lt;NotFound />} /> &lt;!-- F√ºr alle Route, au√üer / und /blog -->
      &lt;/Route>    
    &lt;/Routes>    
  ```

---

### Dynamische Parameter

* In einer Route k√∂nnen Platzhalter ("Parameter") angegeben werden
* Auf die entsprechenden Werte kann in einer Komponente mit `useParams` zugegriffen werden
* ```javascript
  export default function App() {
    &lt;Routes>
      &lt;Route path="/" element={<Page />}>
        &lt;Route path="/post/:postId" element={<PostPage />} />
      &lt;/Route>
    &lt;/Routes>
  }

  function PostPage() {
    const { postId } = useParams(); 
    //  /post/p1  postId: "p1"
    //  /post/1  postId: "1"
  }
  ```  

---

### Links

* Links m√ºssen mit der [`Link`](https://reactrouter.com/docs/en/v6/components/link)-Komponente gerendert werden
* ```javascript
  function PostTeaser({post}) {
    return &lt;div>
      &lt;h1>{post.title}&lt;/h1>
      &lt;Link to={`/post/${post.id}`}>Read more&lt;/Link>
    &lt;/div>  
  }
```
* Die `Link`-Komponente rendert ein `a`-Element, verhindert aber, dass der Browser Serveraufrufe durchf√ºhrt,
  wenn darauf geklickt wird
* Das gilt nur f√ºr interne Links, externe Links wie gewohnt mit HTML `a`-Element
* Alternative: [`NavLink`](https://reactrouter.com/docs/en/v6/components/nav-link) wei√ü, ob der `to`-Pfad
  der gerade aktiven Route entspricht und kann sich dann anders darstellen ("Aktiver Link", "Aktiver Tab", ...)
  * ```javascript
    function NavBar() {
      return &lt;div>
        &lt;NavLink to={`/home}`} className={active => active ? "Tab--active":"Tab--default" }>Home&lt;/Link>
        &lt;NavLink to={`/about}`} className={active => active ? "Tab--active":"Tab--default" }>About&lt;/Link>
        &lt;NavLink to={`/profile}`} className={active => active ? "Tab--active":"Tab--default" }>Profile&lt;/Link>
      &lt;/div>  
    }
```
* Mit `className` und `style` k√∂nnen Callback-Funktionen √ºbergeben werden, die das konkrete Styling/CSS Klasse je nach Zustand
  (active bzw not-active) zur√ºckliefern. 

---

### Navigation per API

* Die [`Navigate`](https://reactrouter.com/docs/en/v6/components/navigate)-Komponente kann gerendert werden,
  wenn eine Komponente beim Rendern einen Redirect machen m√∂chte
* ```javascript
  function BlogPost() {
    const [error, setError] = useState(false);
    const [post, setPost] = useState(null);

    useEffect( () => fetch(...).catch(e => setError(true)), [] );

    if (error) {
      return &lt;Navigate to="/error" />
    }

    return &lt;BlogPost post={post} />
  }
  ```  
* Mit [`useNavigate`](https://reactrouter.com/docs/en/v6/hooks/use-navigate) kann auch per API, z.B. in einem Event Handler, ein Redirect gemacht werden:
* ```javascript
  function LogoutButton() {
    const useNaviate = useNavigate();

    function handleClick() {
      navigate("/");
    }

    return &lt;button onClick={handleClick}>Logout&lt;/button>
  }
  ```  



  </textarea
          >
        </section>
        <section id="t-context">
          <h2>Context API</h2>
          <p>Hintergrund: Context API</p>
          <p>Kein Statemanagement, aber h√§ufig zusammen erw√§hnt</p>
          <p>"Dependency Injection"</p>
          <p>√úberblick: üëâ Miro</p>
        </section>

        <section data-markdown>
          <textarea data-template>
## Context in der Praxis

* üëâ `material/state/01-context`
          </textarea>
        </section>

        <section>
          <h2>Im Detail: Context API</h2>
          <p>Beispiel: <code>blog-example/steps/10-context</code></p>
        </section>

        <section>
          <h2>Context...</h2>
          <p>
            <em
              >erlaubt das Durchreichen von Informationen ohne explizites angeben als Properties</em
            >
          </p>

          <ul>
            <li>funktioniert nur innerhalb einer Hierarchie-Ebene</li>
            <li>es k√∂nnen beliebg viele (fachliche) Context definiert werden</li>
            <li>besteht aus <code>Provider</code> und <code>Consumer</code></li>
            <li>
              <a href="https://reactjs.org/docs/context.html" target="_blank">Doku</a>
            </li>
          </ul>
        </section>

        <section>
          <h2>Context Factory</h2>
          <ul>
            <li>
              <em>erzeugt ein Objekt, mit <b>zwei Komponenten</b></em>
            </li>
            <li>
              <code>Provider</code>, stellt Objekt mit Key-Value-Paaren zur Verf√ºgung (der
              Context-"Value")
            </li>
            <li>
              <code>Consumer</code> wird in eigener Komponente verwendet, um auf einen Context
              zuzugreifen ("versteckt" durch useContext Hook)
            </li>
            <li>
              <pre><code class="line-numbers" data-leftpad>
import react from "React";

const AuthContext = React.createContext();

// erzeugt:
// AuthContext.Provider 
// AuthContext.Consumer (mit Hooks API √ºberfl√ºssig)

export AuthContext;
                      </code></pre>
            </li>
          </ul>
        </section>

        <section data-markdown>
          <textarea data-template>
## Context Factory mit TypeScript

* Der `createContext` kann ein Typ-Parameter √ºbergeben werden, der den Context-Wert beschreibt
* `createContext` ben√∂tigt dann einen Default-Wert, der diesem Typen entspricht
  * Der Default-Wert wird in der Anwendung in der Regel nicht verwendet
  * Wird nur verwendet, wenn (f√§lschlich) auf den Kontext zugegriffen wird, ohne dass es einen Provider
    gibt
* ```typescript
  type IAuthContext = { 
    username: string | null;
    onLogin(newUser: string): void;
    onLogout(): void;
  }

  const AuthContext = React.createContext<IAuthContext>({
    // Dummy-Implementierung vom Default Context
    username: null,
    onLogin() {},
    onLogout() {}
  });

  export AuthContext;
  ```

          </textarea>
        </section>

        <section data-markdown>
          <textarea data-template>
## Context Provider

* _Eine React-Komponente, die einen Context zur Verf√ºgung stellt_
  * wird innerhalb einer eigenen Komponente eingebunden und zur√ºckgeliefert
  * Nimmt ein Objekt ("Context") mit beliebigen Werten entgegen (`value`-Property)
  * Alle Eintr√§ge des Objektes sind f√ºr die Konsumenten verf√ºgbar
* ```typescript
  const AuthContext = React.createContext&lt;IAuthContext>(/*...*/); // wie gesehen

  type AuthProviderProps = {
    children: React.ReactElement
  }

  export function AuthProvider(props: AuthProviderProps) {
      const [ currentUser, setCurrentUser ] = React.useState(null);

      const contextValue: IAuthContext = {
        // the current user
        currentUser,

        // function to set new user
        function onLogin(name) { setCurrentUser(name) },
        function onLogout() { setCurrentUser(null) }
      };

      return &lt;AuthContext.Provider value={contextValue}>
        {props.children}
      &lt;/AuthContext.Provider>;
  }             
  ```
  </textarea
          >
        </section>

        <section>
          <h2>useContext-Hook</h2>
          <p><em>Zugriff auf die Werte aus dem Context</em></p>
          <p>
            In allen Komponenten unterhalb der Provider Komponente, kann mit
            <code>useContext</code> auf den Kontext zugegriffen werden
          </p>

          <pre><code class="javascript">
import { AuthContext } from "auth-context";

function UserBadge() {
  const { currentUser } = React.useContext(AuthContext);

  return currentUser  ? &lt;h1>Welcome, {currentUser}&lt;h1> : null;
}            
          </code></pre>

          <p>Aufrufen einer Funktion aus dem Context</p>
          <p>√Ñndert im Context den Zustand der Provider-Komponente</p>
          <p>Alle Konsumer werden neu gerendert und k√∂nnen den neuen Wert verwenden</p>
          <pre><code class="javascript">
function UserBadge() {
  const { currentUser, logout } = React.useContext(AuthContext);

  return currentUser  ? 
    &lt;>&lt;h1>Welcome, {currentUser}&lt;h1>&lt;button onClick={logut}>Logout&lt;/button>&lt;/> 
    : null;
}                
          </code></pre>
        </section>

        <section data-markdown>
          <textarea data-template>
## Zugriff mit Custom Hook

* √úbliches Pattern: f√ºr den Zugriff auf den Context wird ein eigener Hook zur Verf√ºgung gestellt
* ```typescript
  export function useAuthContext(): IAuthContext {
    const authContext = useContext(AuthContext);

    return authContext;
  }            
  ```
* ```typescript
  import { useAuthContext } from "auth-context";
  
  export default function UserBadge() {
    const authContext = useAuthContext();
  }
  ```  
* "Versteckt" den Context vor der Anwendung
  * eher fachliche API
* Hook kann Plausibilt√§tspr√ºfungen machen, z.B. ob Provider korrekt initialisiert wurde
* ```typescript

  const defaultContext = { username: "__NOT__INITIALIZED__ ", /* ... */  }

  // ...
  
  export function useAuthContext(): IAuthContext {
    const authContext = useContext(AuthContext);

    if (authContext.username === defaultContext.username) {
      console.warn("Auth-Kontext wurde nicht korrekt initialisiert (kein Provider)")
    }

    return authContext;
  }            
  ```  

          </textarea>
        </section>

        <section data-markdown>
          <textarea data-template>
## √úbung: Ein Auth-Context f√ºr die Blog-Anwendung 

* _Baue einen Kontext, der den aktuellen User h√§lt und diesen anzeigt_
* Schritte:
  * In `blog-example/backend-rest` bitte `npm start`ausf√ºhren  
  * Arbeite bitte in `blog-example/workspace-typescript-app`
    * ggf. `npm install` hier ausf√ºhren und dann `npm start` (alten Workspace beenden)
  * Du findest im Workspace TODOs, am Besten bearbeitest Du die Dateien in folgender Reihenfolge:
    1. `AuthContext.tsx` (Kontext-Provider-Komponente und -Hook)
    2. `App.tsx` (Context zur Verf√ºgung stellen)
    3. `CurrentUser.tsx`  (Login-/Logout-Button bauen)
    4. `PostEditor.tsx`   (Aktuellen Benutzer anzeigen)
* M√∂gliche L√∂sung findest Du in `steps/10-context`
* Wenn Du fertig bist, bitte "Hand heben" in Teams üôã‚Äç‚ôÄÔ∏è
          </textarea>
        </section>

        <section data-markdown>
          <textarea data-template>
            <!-- .slide: id="t-protected-routes" -->
# Router: Protected Routes

* Fertiges Beispiel `steps/50-router-mit-login`

---

### Pattern: Protected Routes

* React Router kennt keine Protected Routes, man kann sich aber was selbst basteln
* Idee: es gibt eine zentrale Instanz (z.B. Auth Context), in der abgelegt ist,
  ob der User angemeldet ist oder nicht.
* Je nachdem, wird eine Seite gerendert oder zur Login-Seite umgelenkt  
* ```typescript
  function ProtectedPage({children}: {children: React.ReactElement } ) {
    // useAuthContext liefert authentication von "irgendwoher"
    // zur√ºck (z.b. React Context)
    const auth = useAuthContext(); 

    if (auth.currentUser)  {
      // User ist angemeldet
      return children;
    }

    return &lt;Navigate to="/login" />;
  }

  function App() {
    return (
      &lt;Routes>
        &lt;Route path="/about" element={&lt;AboutPage/> />
        &lt;Route path="/login" element={&lt;LoginPage/> />
        &lt;Route path="/admin" element={&lt;ProtectedPage>&lt;AdminPage/>&lt;/ProtectedPage} />
      &lt;/Routes>
    );
  }

  ```  

---

### Navigieren mit dem React Router

* Zum Navigieren kann man entweder die `Navigate`-Komponente oder den `useNavigate`-Hook verwenden
  * `Navigate`-Komponente kann als Return-Wert einer Komponente verwendet werden
  * `useNavigate` wenn programmatisch die URL ge√§ndert werden soll
* Beide APIs bieten dieselben Features

---

### Die `Navigate`-Komponente
* Mit `to` wird der Ziel-Pfad angegeben: `<Navigate to="/login" />` 
  * Der Pfad kann relativ zur Ober-Route angegeben werden
* Mit `state` kann man ein beliebiges Objekt √ºbergeben, dass auf der aufgerufenen Seite abgefragt werden kann
  * Dieses Object wird in der Browser History (!) gespeichert, ist also auch nach Reload noch verf√ºgbar
  * `<Navigate to="..." state={{ redirectAfter: "/"}} />`
* Mit `replace` kann ausgedr√ºckt werden, dass die aufgerufene Route die aktuelle Route im Browser
  ersetzen will 
  * `<Navigate to="..." state={...} replace={true} />`
  * Back-Button w√ºrde dann die aktuelle Route √ºberspringen
  * Beispiel: `/home ‚û°Ô∏è /login ‚û°Ô∏è <Navigate to="/admin" replace /> ‚û°Ô∏è /admin üîô /home`
    * Die `/login`-Route taucht nicht in der Browser-History auf, nachdem `/admin` gerendert wurde

---

### Der `useNavigate`-Hook

- Der `useNavigate`-Hook liefert die `navigate`-Funktion
- API √§hnlich wie `Navigate`-Komponente
- Ziel-Pfad ist erster Parameter: `navigate("/login")`
- `state` und `replace` sind Optionen, die als zweiter Parameter √ºbergeben werden k√∂nnen (beide optional):
- ```typescript
  function ProtectedRoute() {
    const navigate = useNavigate();

    function handleRedirect() {
      navigate("/login", {
        state: { redirectAfter: "/about" },
        replace: true
      });
    }

    // ...
  }
  ```

---

### Location

* Die `Location` gibt Auskunft √ºber die aktuelle URL
* Instanz kann mit `useLocation` abgefragt werden
* Hier√ºber gibt es zum Beispiel:
  * den aktuellen Pfad (`location.pathname`)
  * die Such-Parameter hinter dem `?` in der URL (`location.search`)
  * den State (`location.state`). Kann `undefined` sein.
* ```typescript
  function LoginPage() {
    const location = useLocation();
    const redirectAfter = location.state?.redirectAfter?.pathname || "/";
    
    // Login Formular rendern
    // nach erfolgreichem Login navigate nach redirectAfter
  }
  ```

---

### Location und Location-State in TypeScript

* **Achtung**: Der Typ von `location.state` in TypeScript ist `unknown``
* Ihr m√ºsst also vor der Verwendung √ºberpr√ºfen, ob der Typ Euren "Erwartungen" entspricht
* Dazu k√∂nnt ihr zum Beispiel eine [Type Predicate Function](https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates) bauen
* ```typescript
  // Beschreibt den LocationState, so wie ihn Eure Komponente erwartet
  type LoginPageLocationState = {
    redirectAfter: Location;
  };

  // Type Predicate Function: liefert 'true' zur√ºck, wenn der (Location) State
  //   dem LoginPageLocationState entspricht
  //   TypeScript wei√ü dann auch, dass state von dem Typ ist
  function isLoginPageLocationState(state: unknown): state is LoginPageLocationState {
    return state !== null && typeof state === "object" && "redirectAfter" in state;
  }

  function LoginPage() {
    const { state } = useLocation();
    const redirectAfter = isLoginPageLocationState(state) ? state.redirectAfter : "/";

    // ...
  }
  ```

* Andere L√∂sung siehe `steps/50-router-mit-login/src/LoginPage.tsx`

---

### Beispiel: Navigieren zu urspr√ºnglicher Location

* Use-Case: 
  1. Benutzer ruft "Protected URL" auf
  2. Redirect auf Login
  3. Nach erfolgreichem Login redirect auf urspr√ºngliche seite
* ```typescript
  function ProtectedPage({children}: {children: React.ReactElement } ) {
    const auth = useAuthContext(); 
    const location = useLocation();

    if (auth.username)  { /* ... */ }

    return &lt;Navigate to="/login" state={{redirectAfter: location}} replace />;
  }

  function App() {
    return (
      &lt;Routes>
        &lt;Route path="/about" element={&lt;AboutPage/> />
        &lt;Route path="/login" element={&lt;LoginPage/> />
        &lt;Route path="/admin" element={&lt;ProtectedPage>&lt;AdminPage/>&lt;/ProtectedPage} />
      &lt;/Routes>
    );
  }

  function LoginPage() {
    const navigate = useNavigate();
    const location = useLocation();
    const redirectAfter = location.state?.redirectAfter?.pathname || "/";
    function handleLogin() {
      // login durchf√ºhren, dann:
      navigate(redirectAfter, { replace: true} )
    }

    // Login Formular rendern
  }

  ```  

---

### √úbung: Protected Routes

* _Der PostEditor soll nur aufrufbar sein, wenn ein Benutzer angemeldet ist_
* Schritte:
  1. Implementiere die `ProtectedRoute` (siehe ProtectedRoute.tsx)
  2. F√ºge die `LoginPage` mit dem `path` `/login` in der `App`-Komponente hinzu
  2. Verwende die `ProtectedRoute` in der `App`-Komponente` f√ºr die `PostEditorPage`-Komponente
    * `<Route path="/add" element={<ProtectedRoute><PostEditorPage /></ProtectedRoute>} />`
    * Der PostEditor sollte nun nicht mehr dargestellt werden, wenn Du nicht eingeloggt bist
      * Klicke auf den Login-Button, jetzt sollte sich der PostEditor √∂ffnen lassen
      * Wenn du auf Logout klickst, m√ºsste er unsichtbar werden (bzw. LoginPage muss aufgehen)
  3. Vervollst√§ndige die `LoginPage` (siehe `LoginPage.tsx`)
   * Melde dort den Benutzer mit Namen an und f√ºhre ein Redirect durch
  4. Wenn Du nun den PostEditor √∂ffnest, soll das Login-Formular erscheinen, danach wieder der PostEditor 
* L√∂sung in `steps/50-router-mit-login`
* Wenn Du fertig bist, bitte "Hand heben" in Teams üôã‚Äç‚ôÄÔ∏è

          </textarea>
        </section>

        <section data-markdown>
          <textarea data-template>
            <!-- .slide: id="t-libs" -->            

## React Bibliotheken

* Meine Liste: [https://gist.github.com/nilshartmann/decb10d37a76ae3ab58f0c7755beb038](https://gist.github.com/nilshartmann/decb10d37a76ae3ab58f0c7755beb038)

---

## Typischer Bibliothek-Stack

* **Bibliotheken zum Arbeiten mit Server-Calls**
  * [TanStack Query](https://tanstack.com/query/) (ehem. "React Query")
  * [SWR](https://swr.vercel.app/)

* **Testen von React Anwendungen**
  * [Jest](https://jestjs.io/)
  * [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)
  * Beide Bibliotheken sind in `create-react-app`-basierten Anwendungen bereits enthalten!
  * Siehe auch [Slides zum Testen](#/t-test)

* **Router**
  * [React Router](https://reactrouter.com/) (s. auch [Slides zum Router](#/t-router)) 

---

## Styling (CSS)

* **CSS und CSS Modules**
  * `create-react-app` unterst√ºtzt CSS und CSS Modules
    * In "CSS Modules" wird CSS in einzelne "Module" aufgeteilt
    * Die CSS Klassennamen werden automatisch erzeugt, so dass sie eindeutig sind
  * Zus√§tzlich kann ein "CSS Pr√§prozessor" (SASS benutzer werden.)
    * W√ºrde ich versuchen drauf zu verzichten
* **CSS-in-JavaScript**
  * Hier schreibt ihr CSS-Code in Euren JavaScript-Code
    * Bibliotheken:
      * [Styled Components ](https://styled-components.com)
      * [Emotion](https://emotion.sh/docs/@emotion/react)
* **Meine Empfehlung**
  * CSS und CSS Modules
    * je nach Browser-Support ist modernes CSS sehr m√§chtig
    * CSS Variablen k√∂nnen z.B. f√ºr Themeing genutzt werden
    * [PostCSS](https://postcss.org/) ist ein leichtgewichtiges Framework, das einige Erweiterungen f√ºr CSS mitbringt

---

## Texte und Formulare

* **Internationalisierung**
  * [react-i18next](https://react.i18next.com/)
  * [react-intl](https://formatjs.io/docs/react-intl/)

* Formulare:
  * [React Hook Form](https://react-hook-form.com/)
  * [Formik](https://formik.org/)
  * [Redux Forms](https://redux-form.com/)
  * Beispiel f√ºr React Hook Form (PostEditor): `steps/60-react-hook-form`

---

## Grids und Tabellen

* "Klassiker" f√ºr Tabellen: [TanStack Table](https://tanstack.com/table) (ehemals "React Table")
* [AG Grid](https://www.ag-grid.com/), kommerziell
* [React Admin](https://marmelab.com/react-admin/): Erzeugt CRUD-Anwendungen f√ºr (REST) Endpunkte

             </textarea
          >
        </section>

        <section>
          <h2>Anhang</h2>
        </section>

        <section id="t-test">
          <h1>Teil VI</h1>
          <h2>Testen von React Anwendungen</h2>
        </section>

        <section data-transition="slide none">
          <h2>Was testen wir?</h2>
          <ul>
            <li><b>UI-unabh√§ngige Logik</b> (zum Beispiel Backend Calls, Berechnungen etc.)</li>
            <li>
              <b>Rendering</b> (Ist die Liste der Blog Posts korrekt? Sieht das Markup aus, wie wir
              uns das vorstellen?) und <b>Interaktionen</b> (funktionieren die Event Handler, die
              Callback-Funktionen, der Programmflu√ü etc.?)
            </li>
            <li>
              <b>Verhalten im Browser</b> (z.B. korrekte, pixelgenaue Darstellung,
              Browser-spezifisches JavaScript, Arbeiten mit Browser-Technologie wie Titelzeile,
              Session Storage, Scrollbars etc)
            </li>
          </ul>
        </section>

        <section>
          <h1>Jest</h1>
          <p>
            <em
              >"Delightful JavaScript Testing" (
              <a href="https://jestjs.io/" target="_blank">https://jestjs.io/</a>)</em
            >
          </p>
          <p>Vollst√§ndige Testl√∂sung f√ºr React (und andere):</p>
          <ul>
            <li>API vergleichbar mit <a href="https://jasmine.github.io/">Jasmine</a></li>
            <li>Test Runner</li>
            <li>Specs/Assertions, Mocks</li>
            <li>Code Coverage</li>
            <li>"Snapshot testing"</li>
          </ul>
        </section>
        <section>
          <h4>Jest</h4>
          <h3>Beispiel: Ein einfacher Testfall</h3>
          <pre><code class="javascript"  >// sum.js (or sum.ts)
export const sum = (a,b) => a+b;
        </code></pre>
          <pre><code class="javascript"  >// sum.test.js
import {sum} from '../sum.js';

test('sum of 2 and 2 is 4', () => {
  expect(sum(2, 2)).toBe(4);
});

test('sum of 2 and 2 is not 3', () => {
  expect(sum(2, 2)).not.toBe(3);
});
            </code></pre>
        </section>
        <section>
          <h4>Jest</h4>
          <h2>Testcases</h2>
          <p>
            <code>test</code> oder
            <code>it</code>
          </p>
          <pre><code>test('it should work', () => {
  expect(...).toBe(...);
});</code></pre>
          <pre><code>it('it should also work', () => {
  expect(...).toBe(...);
});</code></pre>
        </section>

        <section>
          <h4>Jest</h4>
          <h2>"Expectations" und "Matchers"</h2>
          <div>
            <p>
              <code>expect()</code> liefert ein <em>Expectation</em> Objekt zur√ºck, das verschiede
              <em>Matcher</em> Funktionen bereitstellt:
            </p>
            <pre><code>expect(actual).toXyz(expected);
// for example:
expect("Hello Jest").toBe("Hello Jest"); // => ok
        </code></pre>
          </div>
          <div>
            <p>Beispiele f√ºr Matchers</p>

            <pre><code>// Compare identity
expect(actual).toBe(expected);
// Compare value:
expect(actual).toEqual(expected);
// true / false / null:
expect(actual).toBeTruthy();
expect(actual).toBeFalsy();
expect(actual).toBeNull();
// Length (Array oder String)
expect(actual).toHaveLength(123);
        </code></pre>
          </div>
          <p>
            <a href="https://jestjs.io/docs/en/expect">https://jestjs.io/docs/en/expect</a>
          </p>
        </section>

        <section>
          <h4>Jest</h4>
          <h2>Mock Funktionen</h2>
          <ul>
            <li>
              <code>jest.fn()</code> erzeugt eine Mock-Funktion
              <pre><code>// Gibt undefined zur√ºck, wenn die Mock-Funktion ausgef√ºhrt wird
const aMockFn = jest.fn();

const x = aMockFn("huhu"); // => undefined
expect(x).toBeUndefined();

expect(aMockFn).toHaveBeenCalled());
expect(aMockFn.toHaveBeenCalledWith("huhu"));
                      </code></pre>
            </li>

            <li>
              Implementierung der Mock-Funktion kann als Parameter √ºbergeben:
              <pre><code>
        const aMockFn = jest.fn( param => `Hello, ${param}` );
        
        console.log(aMockFn('World'));
        // => Hello, World
                  </code></pre>
            </li>
          </ul>
        </section>

        <section>
          <h3>Testen von React Komponenten</h3>
          <h2>Nur rendern</h2>
        </section>

        <section>
          <h3>React Test Renderer</h3>
          <p>
            <a href="https://www.npmjs.com/package/react-test-renderer"
              >https://www.npmjs.com/package/react-test-renderer</a
            >
          </p>
          <p>Rendert React Komponenten in JSON Objekte (ohne DOM):</p>
          <pre><code class="javascript"  >import renderer from 'react-test-renderer';

const component = renderer.create(
  &lt;PostList posts={somePosts} />
);

console.log(component.toJSON());
            </code></pre>
          <pre><code class="javascript"  >
        { type: 'div',
          props: {},
          children:  [
            { type: 'button', props: {}, children: [Object] },
            { type: 'article', props: [Object], children: [Object] },
            { type: 'article', props: [Object], children: [Object] }
          ]
        }
            </code></pre>
        </section>
        <section>
          <h3>"Snapshot Testing" mit Jest</h3>
          <p>
            <code>expect(obj).toMatchSnapshot()</code> vergleicht ein erzeugtes JSON-Objekt mit
            einem gespeicherten JSON-Objekt aus einer Datei:
          </p>
          <ul>
            <li>
              Bei der <b>ersten</b> Ausf√ºhrung: Snapshot-Datei wird angelegt (
              <a href="slides/images/jest-snapshot-file.png" target="_blank">Beispiel</a>)
              <ul>
                <li>Die Snapshot-Datei wird nun in Git eingecheckt</li>
              </ul>
            </li>
            <li>
              In den <b>folgenden</b> Test Ausf√ºhrungen: ein neuer Snapshot wird jeweils erzeugt und
              mit dem <b>gespeicherten</b> Snapshot verglichen
            </li>
            <li>
              Wenn die Snapshots nicht identisch sind:
              <ul>
                <li>
                  Fehler mit Unterschieden (<a
                    href="slides/images/jest-snapshot-diff.png"
                    target="_blank"
                    >Beispiel</a
                  >)
                </li>
                <li>
                  Im "watch mode" von Jest kann der Snapshot aktualisiert werden
                  <img src="slides/images/jest-snapshot-update.png" />
                </li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h3>Snapshot Tests mit Jest und React</h3>
          <pre><code class="javascript"  >import renderer from 'react-test-renderer';
        
test('it should render correctly', () => {

  const somePosts = [ . . . ];

  const component = renderer.create(
    &lt;PostList posts={somePosts} />
  );

  expect(component.toJSON()).toMatchSnapshot();
});
            </code></pre>
        </section>

        <section>
          <h3>Testing React Components #2</h3>
          <h2>Interaktionen</h2>
        </section>

        <section>
          <h3>react-testing-library</h3>
          <p>
            <em
              >"Simple and complete React DOM testing utilities that encourage good testing
              practices."
            </em>
          </p>

          <p>
            <a href="https://github.com/testing-library/react-testing-library" target="_blank"
              >https://github.com/testing-library/react-testing-library</a
            >)
          </p>
          <p>
            Philosophie: Tests werden aus User-Perspektive geschrieben. Das bedeutet, um die zu
            testenden Elemente zu finden, suchst Du nach Eigenschaften, nach denen auch ein User
            suchen w√ºrde (z.B. Labels, Placeholder etc.)
          </p>
          <p>üëâ <code>workspace-typescript</code></p>
        </section>
        <section>
          <h3>react-testing-library</h3>
          <p>Example</p>
          <pre><code class="javascript"  >
            import { render, screen } from "@testing-library/react";
            import userEvent from "@testing-library/user-event";

            it("invokes callback on button click", () => {
              const onAddPostFn = jest.fn();
            
              // Render
              render(&lt;PostList onAddPost={onAddPostFn} posts={mockPosts} />);
            
              // search the button
              const buttonElement = screen.getByRole("button", { name: "Add Post" });

              // "click" the button
              userEvent.click(buttonElement);
            
              // make sure it has been invoked
              expect(onAddPostFn).toHaveBeenCalled();
            });


            </code></pre>
        </section>

        <section>
          <h3>Die render-Funktion</h3>
          <ul>
            <li>
              Die render-Function aus der react-testing-library wird im Test verwendet, um eine
              React Komponente (ohne Browser) zu rendern
            </li>
            <li>Genauso wie in der Anwendungen k√∂nnen Properties angegeben werden</li>
            <li>
              <pre><code class="javascript"  >
import { render } from "@testing-library/react";
  
// Render a single component
render(&lt;PostList onAddPost={onAddPostFn} posts={mockPosts} />);
            </code></pre>
            </li>
            <li>
              Dran denken, ggf. Contexte ebenfalls zu erzeugen, falls diese ben√∂tigt werden (React
              Router, Redux etc)!
            </li>
            <li>
              <pre><code class="javascript"  >

// Render with surrounding Redux Provider (or Router, your own Context etc.)
render(
  &lt;Provider>
    &lt;PostList onAddPost={onAddPostFn} posts={mockPosts} />
  &lt;/Provider>
);
            </code></pre>
            </li>
          </ul>
        </section>
        <section>
          <h3>query Funktionen</h3>
          <p>
            Um die gerenderten HTML-Elemente aus deiner Komponente zu √ºberpr√ºfen und mit ihnen zu
            interagieren, musst Du sie ersteinmal finden ü§ì
          </p>
          <p>
            Auf dem globalen <b>screen</b> Objekt der Testing-Lib sind verschiedene Funktionen
            definiert, mit denen Du nach Elementen suchen kannst
          </p>
          <p>
            Die query-Funktionen haben unterschiedliche <b>Suffixe</b>, die beschreiben,
            <b>nach welchem Kriterium</b> Du suchst (nach Label, nach aria-role, ...)
          </p>
          <p>
            Die Funktionen haben au√üerdem jeweils einen <b>Pr√§fix</b> (getBy, queryBy etc) der
            beschreibt, die Art des R√ºckgabewerts der jeweilgen Funktion (z.B. ob sie einen Error
            wirft oder null zur√ºckgibt, wenn das angefragte Element nicht gefunden wurde)
          </p>
          <p>
            Mehr zu den query-Funktionen:
            <a
              target="_blank"
              href="https://testing-library.com/docs/react-testing-library/cheatsheet#queries"
              >React Testing Library Cheatsheet</a
            >
          </p>

          <pre><code class="javascript">
  // BEISPIELE: 

  // suche nach einem Button (Annahme: es gibt GENAU EINEN, ansonsten schl√§gt der Test fehl)
  const buttonElement = screen.getByRole("button", { name: "Add Post" });

  // suche nach einem Button (gibt null oder EINEN Button, wirft ansonst einen Fehler)
  const buttonElement = screen.queryByRole("button", { name: "Add Post" });

  // suche nach einem Button (gibt alle gefunden zur√ºck oder ein leeres Array)  
  const buttonElement = screen.queryAllByRole("button", { name: "Add Post" });
</code></pre>
        </section>

        <section>
          <h3>√úberpr√ºfen von Elementen</h3>
          <p>
            Wenn Du dein gesuchtes Elemente gefunden hast, kannst Du es √ºberpr√ºfen, ob es deinen
            Erwartungen entspricht (korrekte Attribute gesetzt etc.)
          </p>
          <p>
            Die Bibliothek
            <a href="https://github.com/testing-library/jest-dom" target="_blank">jest-dom</a> f√ºgt
            dazu DOM-spezifiche Matcher f√ºr Jest hinzu.
          </p>

          <pre><code class="javascript">
  import { screen } from "@testing-library/react";

  const buttonElement = screen.queryByRole("button", { name: "Add Post" });

  // stellt sicher, dass das Element im DOM vorhanden ist (getBy-Query w√ºrde hier vielleicht mehr Sinn machen)
  expect(buttonElement).toBeInTheDocument();

  // sicherstellen, dass ein Eingabefeld einen erwarteten Wert hat
  expect(titleInput).toHaveValue("Moin moin");

  // sicherstellen, dass ein Button disabled ist
  expect(okButton).toBeDisabled();
</code></pre>
          <p>Alle Matcher sind auf der oben verlinkten GitHub Seite dokumentiert</p>
        </section>
        <section>
          <h3>Interaktionen</h3>
          <p>
            Du kannst mit den Elementen interagieren, in dem Du ihnen Events sendest, genau wie es
            ein Browser tun w√ºrde
          </p>
          <p>
            Es gibt eine weitere Bibliothek,
            <a href="https://github.com/testing-library/user-event" target="_blank"> user-event</a>,
            die dir dabei hilft, die Events zu erzeugen.
          </p>

          <pre><code class="javascript">
            import userEvent from "@testing-library/user-event";
            // Simuliert die Eingabe in ein Textfeld
            userEvent.type(titleInput, "New Title");

            // Simuliert den Klick auf einen Button
            userEvent.click(clearButton);
          </code></pre>
          <p>Alle Events sind auf der GitHub Seite beschrieben (Link oben)</p>

          <p>
            Vor dem Versenden eines Events musst Du <b>nicht</b> √ºberpr√ºfen, ob das Element, dem Du
            das Event senden willst, vorhanden ist. Die Bibliothek gibt eine sehr sprechende Fehler
            aus, wenn das Element nicht vorhanden ist
          </p>
        </section>
        <section>
          <h3>Testen von fetch-Aufrufen</h3>
          <p>Herausforderungen:</p>
          <ul>
            <li>Asynchroner Code (nicht beschr√§nkt auf fetch)</li>
            <li>Server Zugriffe/Server Mocks</li>
          </ul>
        </section>
        <section>
          <h3>Behandlung von asynchronem code</h3>
        </section>

        <section>
          <h3>Testen von asynchronem Code</h3>
          <p>
            Beispiel: Die <b>App</b> Komponente l√§dt Daten, <em>erst dann</em> stellt sie die
            PostList dar. Das Laden der Posts ist asynchron.
          </p>

          <pre><code class="javascript">
            it("should render posts read from backend", () => {
              render(&lt;App />);
            
              // Annahme: es gibt einen Artikel mit dem Title "Learning React"
              const articleOne = screen.findByRole("heading", { name: "Learning React" });

              expect(articleOne).toBeInTheDocument(); // THIS WON'T WORK!
            });
          </code></pre>
          <p>
            Wir k√∂nnen einen Test als async-funktion schreiben und darin mit <b>await</b> auf ein
            Element warten
          </p>
          <pre><code class="javascript">
            // Test-Funktion als async-Funktion (beachte 'async'):
            it("should render posts read from backend", async () => {
              render(&lt;App />);
            
              // Beachte await hier:
              const articleOne = await screen.findByRole("heading", { name: "Learning React" });

              expect(articleOne).toBeInTheDocument(); // YIPPIE, WORKS
            });
          </code></pre>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Testen von fetch</h3>
          <p>Wie gesehen, k√∂nnen wir asynchronen Code testen</p>
          <p>Wollen wir fetch-Aufrufe in unserem Code haben, den wir testen?</p>
          <p>
            M√∂glicherweise nicht, weil wir bei echten fetch-Aufrufen auch einen echten, laufenden
            und funktionierenden Server im Test br√§uchten
          </p>
          <p>Stattdessen wollen wir das "echte" fetch mocken</p>
        </section>

        <section>
          <h3>Fetch mocken, Ansatz #1</h3>
          <p>Wir k√∂nnen <b>komplette Module</b> in Jest mocken</p>
          <p>Wir k√∂nnten unseren fetch-Code in ein eigenes Modul schieben und das dann mocken</p>

          <pre><code class="javascript">
            // api.ts (fetch vereinfacht!)
            export function readPosts() {
              return fetch("http://localhost:7000/posts").then(response => response.json());
            }
          </code></pre>

          <pre><code class="javascript">
            // App.tsx:

            import { readPosts } from "./api";
            function App() {
              // ...
              React.useEffect(() => {
                // Verwenden von readPosts hier:
                readPosts()
                  .then(json => {
                    setLoading(false);
                    setPosts(json);
                  })
                  .catch(err => console.error("Loading data failed: " + err));
              }, []);
            }
          </code></pre>
        </section>
        <section>
          <h3>Mocken von Modulen in Jest</h3>
          <p>Es gibt mehrere Varianten. Das hier die einfachste(?)</p>

          <pre><code class="javascript">
            // App.test.tsx

            const mockPosts = [
              { id: "1", title: "One Fetch Mock", body: "Lorem ipsum" },
              { id: "2", title: "Second Post Fetch Mock", body: "Some more content" }
            ];

            jest.mock("../api", () => ({
              readPosts: () => Promise.resolve(mockPosts)
            }));

            it("should render posts read from backend", async () => {
              render(&lt;App />);
            
              // Hier immer noch asnychroner Code (deswegen await), aber:
              // kein laufender Server mehr ben√∂tigt
              const articleOne = await screen.findByRole("heading", { name: "One" });
              expect(articleOne).toBeInTheDocument();

              expect(screen.getByText("Second Post")).toBeInTheDocument();
            });
          </code></pre>
          <p>
            Beispiel:
            <code
              >blog-example/steps/6a-testing-with-api-module/src/__tests__/App_module_mock.test.tsx</code
            >
          </p>
        </section>
        <section>
          <h3>Ansatz #2: fetch API mocken</h3>
          <p>Es gibt mehrere Bibliothken mit fetch-Mocks</p>
          <p>
            F√ºr mich funktioniert
            <a href="https://www.npmjs.com/package/jest-fetch-mock" target="_blank"
              >jest-fetch-mock</a
            >
            am Besten
          </p>

          <pre><code class="javascript">
            // App.test.tsx
            it("should render posts read from backend", async () => {
              // setzen des Ergebnisses, das der n√§chste fetch-Aufruf zur√ºckliefern soll
              fetchMock.mockResponse(JSON.stringify(mockPosts));

              render(&lt;App />);
            
              // Immer noch asynchroner Code, aber kein "echter" fetch-Aufruf mehr,
              // zur√ºckgegeben wird das oben angegebene Ergebnis
              const articleOne = await screen.findByRole("heading", { name: "One Fetch Mock" });

              expect(articleOne).toBeInTheDocument();
            });

          </code></pre>
          <p>
            Beispiel:
            <code
              >blog-example/steps/6a-testing-with-api-module/src/__tests__/App_jest_mock.test.tsx</code
            >
          </p>
        </section>

        <!-- ============================================================================= -->
        <section>
          <h3>Ansatz #3: Mock Service Worker (MSW)</h3>

          <p><a href="https://github.com/mswjs/msw" target="_blank">MSW</a></p>
          <p>
            MSW mockt echte Server-Aufrufe mit einem
            <a href="https://developer.mozilla.org/de/docs/Web/API/Service_Worker_API"
              >Service Worker</a
            >
          </p>
          <p>
            fetch-Aufrufe werden "richtig" ausgef√ºhrt, aber beantwortet von dem Service Worker Mock
          </p>

          <pre><code class="javascript">
            // PostList.test.js
            import { rest } from 'msw'
            import { setupServer } from 'msw/node'
            
            const server = setupServer(
              rest.get('/posts', (req, res, ctx) => {
                return res(ctx.json( mockPosts ))
              }),
            )

            test("it should render blog list", async () => {
              render(&lt;PostList />);
              // ...
            })
          </code></pre>
        </section>

        <section>
          <h2>√úbung: Ein Test f√ºr den PostEditor</h2>
          <p>Schritte:</p>
          <ol>
            <li>Arbeite in <code>blog-example/workspace-typescript</code></li>
            <li>Starte in einem neuen Terminal <code>npm test</code> (der Prozess l√§uft "ewig")</li>
            <li>
              Es sollte einen fehlerhaften Test geben:
              <b><code>PostEditor.test.tsx</code></b
              >.
            </li>
            <li>Warum? Weil der noch leer ist üò¨!</li>
            <li>
              Implementiere den fehlenden Test. In der Datei<b><code>PostEditor.test.tsx</code></b>
              stehen TODOs daf√ºr
            </li>
            <li>
              Hinweis: wenn Du die Datei speicherst, werden die Tests automatisch neu ausgef√ºhrt
              (solange Du
              <code>npm test</code> noch laufen hast), ansonsten kannst Du "a" auf der Kommandozeile
              dr√ºcken, zum erneuten Ausf√ºhren der Tests.
            </li>
            <li>M√∂gliche L√∂sung in <code>steps/6-test</code></li>
            <li>Wenn Du fertig bist, bitte "Hand heben" in Teams üôã‚Äç‚ôÄÔ∏è</li>
          </ol>
        </section>

        <section>
          <h2>Browser Tests</h2>
          <p>H√§ufig eingesetzt:</p>
          <ul>
            <li>
              <a href="https://www.selenium.dev/">Selenium - The "classic"</a>
            </li>
            <li>
              <a href="https://devexpress.github.io/testcafe/" target="_blank">TestCafe</a> (mit
              Support f√ºr sehr viele Browser, u.a. auch Cloud-Service
              <a href="https://www.browserstack.com/" target="_blank">BrowserStack</a>
            </li>
            <li><a href="https://www.cypress.io/" target="_blank">Cypress</a></li>
            <li>
              In TestCafe und Cypress werden die Tests in JavaScript/TypeScript geschrieben,
              Selenium gibt's f√ºr mehrere Sprachen
            </li>
          </ul>
        </section>

        <section>
          <h2>Geschafft! üòä</h2>
          <h3>Vielen Dank f√ºr Eure Teilnahme!</h3>
          <h3>Viel Spa√ü und Erfolg mit React!</h3>
          <p>Wenn ihr noch Fragen habt, k√∂nnt ihr mich erreichen:</p>
          <p>Mail: <a href="mailto:nils@nilshartmann.net">nils@nilshartmann.net</a></p>
          <p>
            Web: <a href="https://nilshartmann.net" target="_blank">https://nilshartmann.net</a>
          </p>
          <p>
            Twitter: <a href="https://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
          </p>
        </section>
      </div>
    </div>

    <script src="slides/revealjs/reveal.js/dist/reveal.js"></script>
    <script src="slides/revealjs/reveal.js/plugin/notes/notes.js"></script>
    <script src="slides/revealjs/reveal.js/plugin/markdown/markdown.js"></script>
    <script src="slides/revealjs/reveal.js/plugin/highlight/highlight.js"></script>
    <script src="slides/revealjs/config.js"></script>
  </body>
</html>
